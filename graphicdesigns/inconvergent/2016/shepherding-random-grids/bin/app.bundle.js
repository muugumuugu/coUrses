!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function main(){(0,_utils.printInfo)("running main. yess"),window.drawings||(window.drawings={});var story={introduction:scene.getSceneSingle,multiple:scene.getSceneMultiple,grid:scene.getSceneGrid,averages:scene.getSceneGridAveragesCollapse,"random-averages":scene.getSceneGridAverages,paths:scene.getSceneGridAveragesHistory,strokes:scene.getSceneGridAveragesStrokes,"more-strokes":scene.getSceneGridAveragesStrokes2};Object.keys(story).forEach(function(sceneName){(0,_utils.printInfo)("updating: "+sceneName),(0,_utils.updateAndStartCanvas)(sceneName,story[sceneName])})}var _utils=__webpack_require__(1),_scenes=__webpack_require__(2),scene=_interopRequireWildcard(_scenes);main()},function(module,exports){"use strict";function printInfo(){for(var s="",_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];for(var i=0;i<args.length;i++)s=s+" "+JSON.stringify(args[i]);console.log(s)}function printWarn(){for(var s="",_len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];for(var i=0;i<args.length;i++)s=s+" "+JSON.stringify(args[i]);console.warn(s)}function updateAndStartCanvas(name,getScene){function scrollHandler(){var inView=isInViewport(container),animId=window.drawings[canvasId];inView?animId||(printInfo("starting: ",canvasId),animloop(scene,canvasId)):animId&&(printInfo("stopping: ",canvasId),cancelAnimationFrame(animId),window.drawings[canvasId]=void 0)}function clickHandler(){window.removeEventListener("scroll",scrollHandler,!1),canvas.removeEventListener("click",clickHandler,!1),window.drawings[canvasId]&&(printInfo("stopping: ",canvasId),cancelAnimationFrame(window.drawings[canvasId]),window.drawings[canvasId]=void 0),updateAndStartCanvas(name,getScene)}var canvasId="canvas-"+name,containerId="container-"+name,cs=getCanvasSize(),width=cs.width,height=cs.height,canvasStr='<canvas width="'+width+'" height="'+height+'"\n  class="drawing" id="'+canvasId+'"></canvas>',container=document.getElementById(containerId);container.innerHTML=canvasStr;var canvas=document.getElementById(canvasId),ctx=canvas.getContext("2d"),scene=getScene(ctx,width,height);isInViewport(container)&&animloop(scene,canvasId),window.addEventListener("scroll",scrollHandler,!1),canvas.addEventListener("click",clickHandler,!1)}function animloop(f,canvasId){window.drawings[canvasId]=requestAnimationFrame(function(){return animloop(f,canvasId)}),f()}function getCanvasSize(){var width=Math.max(window.innerWidth-60,320),height=Math.max(.6*window.innerHeight,400);return{width:width,height:height}}function isInViewport(element){var rect=element.getBoundingClientRect(),html=document.documentElement,bottom=rect.bottom,top=rect.top,mid=.5*(bottom+top);return mid>0&&mid<(window.innerHeight||html.clientHeight)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.printInfo=printInfo,exports.printWarn=printWarn,exports.updateAndStartCanvas=updateAndStartCanvas,exports.animloop=animloop,exports.getCanvasSize=getCanvasSize,exports.isInViewport=isInViewport,function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}()},function(module,exports,__webpack_require__){"use strict";function getBoundary(width,height){var edgeX=5*width/100,edgeTopY=.2*height,edgeBottomY=.2*height,xl=0,xr=width,yb=height,yt=0,xMin=edgeX,xMax=width-edgeX,yMin=edgeTopY,yMax=height-edgeBottomY,yMid=.5*(yMax+yMin),xMid=.5*(xMax+xMin);return{xMin:xMin,xMax:xMax,yMin:yMin,yMax:yMax,yMid:yMid,xMid:xMid,xl:xl,xr:xr,yb:yb,yt:yt}}function getSceneSingle(ctx,width,height){function scene(){ctx.fillStyle=WHITE,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=GRAY,positions=positions.map(function(gp){var x=gp.x,y=gp.y;ctx.beginPath(),ctx.arc(x,y,dotSize,0,TWOPI),ctx.fill();var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(x+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(y+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH;var boundary=getBoundary(width,height),dotSize=10,noise=3,positions=[{x:boundary.xMid,y:boundary.yMid}];return scene}function getSceneMultiple(ctx,width,height){function scene(){ctx.fillStyle=WHITE,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=GRAY,positions=positions.map(function(gp){var x=gp.x,y=gp.y;ctx.beginPath(),ctx.arc(x,y,dotSize,0,TWOPI),ctx.fill();var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(x+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(y+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH;var boundary=getBoundary(width,height),rad=.6*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),dotSize=5,gridNum=Math.floor(rad/20),grid=(0,_array.getGrid)(gridNum),positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid),noise=1;return scene}function getSceneGrid(ctx,width,height){function scene(){ctx.fillStyle=WHITE,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=GRAY,positions=positions.map(function(gp,ij){var g=grid[ij],x=gp.x,y=gp.y;ctx.beginPath(),ctx.arc(x,y,dotSize,0,TWOPI),ctx.fill(),g.near.forEach(function(nij){var gn=positions[nij];nij>ij&&(ctx.beginPath(),ctx.moveTo(x,y),ctx.lineTo(gn.x,gn.y),ctx.stroke())});var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(x+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(y+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH;var boundary=getBoundary(width,height),rad=.6*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),dotSize=5,gridNum=Math.floor(rad/20),grid=(0,_array.getGrid)(gridNum),noise=1,positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid);return scene}function getSceneGridAveragesCollapse(ctx,width,height){function scene(){ctx.fillStyle=WHITE,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=GRAY,positions=positions.map(function(gp,ij){var g=grid[ij],gx=gp.x,gy=gp.y;ctx.beginPath(),ctx.arc(gx,gy,dotSize,0,TWOPI),ctx.fill();var mx=0,my=0,wt=0;g.near.forEach(function(nij){var gn=positions[nij];nij>ij&&(ctx.beginPath(),ctx.moveTo(gx,gy),ctx.lineTo(gn.x,gn.y),ctx.stroke());var nwij=weight[nij];wt+=Math.abs(nwij),mx+=nwij*gn.x,my+=nwij*gn.y}),mx/=wt,my/=wt,ctx.beginPath(),ctx.moveTo(gx,gy),ctx.lineTo(mx,my),ctx.strokeStyle=CYAN,ctx.stroke(),ctx.strokeStyle=GRAY;var dx=mx-gx,dy=my-gy,dd=Math.sqrt(dx*dx+dy*dy||1);dx/=dd,dy/=dd;var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(gx+dx*scale+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(gy+dy*scale+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH,ctx.fillStyle=LIGHTGRAY;var boundary=getBoundary(width,height),rad=.6*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),gridNum=Math.floor(rad/20),grid=(0,_array.getGrid)(gridNum),num=gridNum*gridNum,dotSize=5,noise=1,scale=.1,positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid),weight=(0,_array.getNs)(num,1);return scene}function getSceneGridAverages(ctx,width,height){function scene(){ctx.fillStyle=WHITE,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=GRAY,positions=positions.map(function(gp,ij){var g=grid[ij],gx=gp.x,gy=gp.y,sgn=sign[ij];ctx.beginPath(),ctx.arc(gx,gy,showWeight*weight[ij],0,TWOPI),sgn<0?ctx.stroke():ctx.fill();var mx=0,my=0,wt=0;g.near.forEach(function(nij){var gn=positions[nij];nij>ij&&(ctx.beginPath(),ctx.moveTo(gx,gy),ctx.lineTo(gn.x,gn.y),ctx.stroke());var nwij=weight[nij];wt+=nwij,mx+=nwij*gn.x,my+=nwij*gn.y}),mx/=wt,my/=wt,ctx.beginPath(),ctx.moveTo(gx,gy),ctx.lineTo(mx,my),ctx.strokeStyle=CYAN,ctx.stroke(),ctx.strokeStyle=GRAY;var dx=mx-gx,dy=my-gy,dd=Math.sqrt(dx*dx+dy*dy||1);dx/=dd,dy/=dd;var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(gx+sgn*dx*scale+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(gy+sgn*dy*scale+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH,ctx.fillStyle=LIGHTGRAY;var boundary=getBoundary(width,height),rad=.6*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),gridNum=Math.floor(rad/20),grid=(0,_array.getGrid)(gridNum),num=gridNum*gridNum,noise=.3,scale=.1,showWeight=10,positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid),weight=(0,_array.getRnd)(num,0,1),sign=(0,_array.getPMRdn)(num);return scene}function getSceneGridAveragesHistory(ctx,width,height){function scene(){positions=positions.map(function(gp,ij){var g=grid[ij],gx=gp.x,gy=gp.y;ctx.beginPath(),ctx.rect(gx,gy,1,1),ctx.fill();var sgn=sign[ij],mx=0,my=0,wt=0;g.near.forEach(function(nij){var gn=positions[nij],nwij=weight[nij];wt+=nwij,mx+=nwij*gn.x,my+=nwij*gn.y}),mx/=wt,my/=wt;var dx=mx-gx,dy=my-gy,dd=Math.sqrt(dx*dx+dy*dy||1);dx/=dd,dy/=dd;var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(gx+sgn*dx*scale+Math.cos(a)*r,boundary.xr-1,boundary.xl),y:(0,_array.limit)(gy+sgn*dy*scale+Math.sin(a)*r,boundary.yb-1,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH,ctx.fillStyle=LIGHTGRAY;var boundary=getBoundary(width,height),rad=.5*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),gridNum=Math.floor(rad/15),grid=(0,_array.getGrid)(gridNum),num=gridNum*gridNum,noise=.3,scale=.1,positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid),weight=(0,_array.getRnd)(num,0,1),sign=(0,_array.getPMRdn)(num);return scene}function stroke(ctx,n,a,b){for(var dx=b.x-a.x,dy=b.y-a.y,i=0;i<n;i++){var rnd=Math.random();ctx.beginPath(),ctx.rect(a.x+rnd*dx,a.y+rnd*dy,1,1),ctx.fill()}}function getSceneGridAveragesStrokes(ctx,width,height){function scene(){positions=positions.map(function(gp,ij){var g=grid[ij],gx=gp.x,gy=gp.y,sgn=sign[ij],mx=0,my=0,wt=0;g.near.forEach(function(nij){var gn=positions[nij];stroke(ctx,4,gp,gn);var nwij=weight[nij];wt+=nwij,mx+=nwij*gn.x,my+=nwij*gn.y}),mx/=wt,my/=wt;var dx=mx-gx,dy=my-gy,dd=Math.sqrt(dx*dx+dy*dy||1);dx/=dd,dy/=dd;var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(gx+sgn*dx*scale+Math.cos(a)*r,boundary.xr-1,boundary.xl),y:(0,_array.limit)(gy+sgn*dy*scale+Math.sin(a)*r,boundary.yb-1,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH,ctx.fillStyle=LIGHTGRAY;var boundary=getBoundary(width,height),rad=.5*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),gridNum=Math.floor(rad/15),grid=(0,_array.getGrid)(gridNum),num=gridNum*gridNum,noise=.3,scale=.1,positions=(0,_array.getGridPos)(gridNum,grid,rad,boundary.xMid,boundary.yMid),weight=(0,_array.getRnd)(num,0,1),sign=(0,_array.getPMRdn)(num);return scene}function getSceneGridAveragesStrokes2(ctx,width,height){function scene(){positions=positions.map(function(gp,ij){var g=grid[ij],gx=gp.x,gy=gp.y,sgn=sign[ij],mx=0,my=0,wt=0;g.near.forEach(function(nij){var gn=positions[nij];stroke(ctx,4,gp,gn);var nwij=weight[nij];wt+=nwij,mx+=nwij*gn.x,my+=nwij*gn.y}),mx/=wt,my/=wt;var dx=mx-gx,dy=my-gy,dd=Math.sqrt(dx*dx+dy*dy||1);dx/=dd,dy/=dd;var a=Math.random()*TWOPI,r=Math.random()*noise;return{x:(0,_array.limit)(gx+sgn*dx*scale+Math.cos(a)*r,boundary.xr,boundary.xl),y:(0,_array.limit)(gy+sgn*dy*scale+Math.sin(a)*r,boundary.yb,boundary.yt)}})}ctx.strokeStyle=GRAY,ctx.fillStyle=GRAY,ctx.lineWidth=LINEWIDTH,ctx.fillStyle=LIGHTGRAY;var boundary=getBoundary(width,height),rad=.2*Math.min(boundary.xMax-boundary.xMin,boundary.yMax-boundary.yMin),gridNum=Math.floor(rad/15),grid=(0,_array.getGrid)(gridNum),num=gridNum*gridNum,noise=.3,scale=.2,positions=(0,_array.getRndCirc)(num,boundary.xMid,boundary.yMid,rad),weight=(0,_array.getRnd)(num,0,1),sign=(0,_array.getPMRdn)(num);return scene}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSceneSingle=getSceneSingle,exports.getSceneMultiple=getSceneMultiple,exports.getSceneGrid=getSceneGrid,exports.getSceneGridAveragesCollapse=getSceneGridAveragesCollapse,exports.getSceneGridAverages=getSceneGridAverages,exports.getSceneGridAveragesHistory=getSceneGridAveragesHistory,exports.getSceneGridAveragesStrokes=getSceneGridAveragesStrokes,exports.getSceneGridAveragesStrokes2=getSceneGridAveragesStrokes2;var _array=__webpack_require__(3),_draw=__webpack_require__(4),TWOPI=2*Math.PI,WHITE="rgba(255, 255, 255, 1.0)",GRAY="rgba(0, 0, 0, 0.6)",LIGHTGRAY="rgba(0, 0, 0, 0.05)",CYAN="rgba(0, 170, 170, 1.0)",LINEWIDTH=2},function(module,exports,__webpack_require__){"use strict";function getNs(n,v){for(var res=[],i=0;i<n;i++)res.push(v);return res}function getRnd(n,min,max){for(var res=[],i=0;i<n;i++)res.push(min+Math.random()*(max-min));return res}function getPMRdn(n){for(var res=[],i=0;i<n;i++)res.push(Math.pow(-1,Math.floor(2*Math.random())));return res}function getRndXRndY(n,xMin,xMax,yMin,yMax){for(var res=[],i=0;i<n;i++)res.push({x:xMin+Math.random()*(xMax-xMin),y:yMin+Math.random()*(yMax-yMin)});return res}function getRndXLinspaceY(n,xMin,xMax,yMin,yMax){for(var res=[],s=(yMax-yMin)/n,y=yMin,i=0;i<n;i++)res.push({x:xMin+Math.random()*(xMax-xMin),y:y}),y+=s;return res}function getGrid(n){for(var res=[],i=0;i<n;i++)for(var j=0;j<n;j++){var near=[];i>0&&near.push((i-1)*n+j),i<n-1&&near.push((i+1)*n+j),j>0&&near.push(i*n+j-1),j<n-1&&near.push(i*n+j+1),res.push({i:i,j:j,near:near})}return res}function getRndSign(num){for(var res=[],i=0;i<num;i++)res.push(Math.pow(-1,Math.floor(2*Math.random())));return res}function getGridPos(num,grid,rad,xMid,yMid){return grid.map(function(g){var n=num-1,x=xMid+(1-2*(g.i/n))*rad,y=yMid+(1-2*(g.j/n))*rad;return{x:x,y:y}})}function getLinspaceXLinspaceY(n,xMin,xMax,yMin,yMax){for(var res=[],sX=(xMax-xMin)/n,sY=(yMax-yMin)/n,x=xMin,y=yMin,i=0;i<n;i++)res.push({x:x,y:y}),x+=sX,y+=sY;return res}function getCirc(n,ix,iy,rad){for(var res=[],d=TWOPI/n,a=0,i=0;i<n;i++){var x=ix+Math.cos(a)*rad,y=iy+Math.sin(a)*rad;res.push({x:x,y:y}),a+=d}return res}function getRndCirc(n,ix,iy,rad){for(var res=[],i=0;i<n;i++){var a=Math.random()*TWOPI,x=ix+Math.cos(a)*rad,y=iy+Math.sin(a)*rad;res.push({x:x,y:y})}return res}function getRndRect(n,left,right,bottom,top){for(var res=[],i=0;i<n;i++){var x=left+Math.random()*(right-left),y=bottom+Math.random()*(top-bottom);res.push({x:x,y:y})}return res}function permuteY(path,noise){var newPath=path.map(function(_ref){var x=_ref.x,y=_ref.y,rnd=(1-2*Math.random())*noise;return{x:x,y:y+rnd}});return newPath}function permute(arr,noise){var newArr=arr.map(function(v){var rnd=(1-2*Math.random())*noise;return v+rnd});return newArr}function limitedPermute(arr,noise,mi,ma){var newArr=arr.map(function(v){var rnd=(1-2*Math.random())*noise;return Math.max(Math.min(v+rnd,ma),mi)});return newArr}function limit(v,ma,mi){return Math.max(Math.min(v,ma),mi)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNs=getNs,exports.getRnd=getRnd,exports.getPMRdn=getPMRdn,exports.getRndXRndY=getRndXRndY,exports.getRndXLinspaceY=getRndXLinspaceY,exports.getGrid=getGrid,exports.getRndSign=getRndSign,exports.getGridPos=getGridPos,exports.getLinspaceXLinspaceY=getLinspaceXLinspaceY,exports.getCirc=getCirc,exports.getRndCirc=getRndCirc,exports.getRndRect=getRndRect,exports.permuteY=permuteY,exports.permute=permute,exports.limitedPermute=limitedPermute,exports.limit=limit;var TWOPI=(__webpack_require__(1),2*Math.PI)},function(module,exports,__webpack_require__){"use strict";function drawPath(ctx,p){ctx.beginPath(),ctx.moveTo(p[0].x,p[0].y);for(var i=1;i<p.length;i++)ctx.lineTo(p[i].x,p[i].y);ctx.stroke()}function drawDots(ctx,p,rad,fill){for(var i=0;i<p.length;i++){var x=p[i].x,y=p[i].y;ctx.beginPath(),ctx.arc(x,y,rad,0,TWOPI),fill?ctx.fill():ctx.stroke()}}function drawPathDots(ctx,p,rad){for(var num=1,i=1;i<p.length;i++){for(var x2=p[i].x,y2=p[i].y,x1=p[i-1].x,y1=p[i-1].y,k=0;k<num;k++)ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke();ctx.beginPath(),ctx.arc(p[i].x,p[i].y,rad,0,TWOPI),ctx.fill()}}function clear(ctx,width,height){ctx.beginPath(),ctx.rect(0,0,width,height),ctx.fill()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawPath=drawPath,exports.drawDots=drawDots,exports.drawPathDots=drawPathDots,exports.clear=clear;var TWOPI=(__webpack_require__(1),Math.PI,2*Math.PI);.5*Math.PI}]);