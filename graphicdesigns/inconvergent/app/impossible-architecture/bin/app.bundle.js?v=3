!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function main(){(0,_utils.printInfo)("running main. yess"),window.drawings||(window.drawings={});var story={main:scene.getIntroduction};Object.keys(story).forEach(function(sceneName){(0,_utils.printInfo)("updating: "+sceneName),(0,_utils.updateAndStartCanvas)(sceneName,story[sceneName])})}var _utils=__webpack_require__(1),_scenes=__webpack_require__(2),scene=_interopRequireWildcard(_scenes);main()},function(module,exports){"use strict";function printInfo(){for(var s="",_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];for(var i=0;i<args.length;i++)s=s+" "+JSON.stringify(args[i]);console.log(s)}function printWarn(){for(var s="",_len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];for(var i=0;i<args.length;i++)s=s+" "+JSON.stringify(args[i]);console.warn(s)}function print(a){return console.log(a),a}function updateAndStartCanvas(name,getScene){function scrollHandler(){var inView=isInViewport(container),animId=window.drawings[canvasId];inView?animId||(printInfo("starting: ",canvasId),animloop(scene,canvasId)):animId&&(printInfo("stopping: ",canvasId),cancelAnimationFrame(animId),window.drawings[canvasId]=void 0)}function clickHandler(){window.removeEventListener("scroll",scrollHandler,!1),canvas.removeEventListener("click",clickHandler,!1),window.drawings[canvasId]&&(printInfo("stopping: ",canvasId),cancelAnimationFrame(window.drawings[canvasId]),window.drawings[canvasId]=void 0),updateAndStartCanvas(name,getScene)}var canvasId="canvas-"+name,containerId="container-"+name,cs=getCanvasSize(),width=cs.width,height=cs.height,canvasStr='<canvas width="'+width+'" height="'+height+'"\n  class="drawing" id="'+canvasId+'"></canvas>',container=document.getElementById(containerId);container.innerHTML=canvasStr;var canvas=document.getElementById(canvasId),ctx=canvas.getContext("2d"),scene=getScene(ctx,width,height);isInViewport(container)&&animloop(scene,canvasId),window.addEventListener("scroll",scrollHandler,!1),canvas.addEventListener("click",clickHandler,!1)}function animloop(f,canvasId){window.drawings[canvasId]=requestAnimationFrame(function(){return animloop(f,canvasId)}),f()}function getCanvasSize(){var width=Math.max(window.innerWidth-20,400),height=Math.max(window.innerHeight-20,400);return{width:width,height:height}}function isInViewport(element){var rect=element.getBoundingClientRect(),html=document.documentElement,bottom=rect.bottom,top=rect.top,mid=.5*(bottom+top);return mid>0&&mid<(window.innerHeight||html.clientHeight)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.printInfo=printInfo,exports.printWarn=printWarn,exports.print=print,exports.updateAndStartCanvas=updateAndStartCanvas,exports.animloop=animloop,exports.getCanvasSize=getCanvasSize,exports.isInViewport=isInViewport,function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}()},function(module,exports,__webpack_require__){"use strict";function getState(w,pt){var angle=rndbtwn(-PI,PI);return{objs:(0,_vec.box)(1,1,new _vec.vec(0,0)).map(function(v){return pt.add((0,_vec.rot)(v,angle).scale(w))}),circs:[],lines:[],updated:!1,itt:0,next:-1}}function doAnimate(state){var newObjs=state.objs.map(function(o){return o.doAnim()});return state.objs=newObjs,state.itt+=1,state}function rndbtwn(a,b){return a+Math.random()*(b-a)}function identity(v){return v}function grates(n,a,b,c,d){return(0,_array.getLinspace)(n,0,1).map(function(s){return[a.add(b.sub(a).scale(s)),c.add(d.sub(c).scale(s))]})}function doExtrude(a,b,l,animStpMult,rotProp,props){var offset=(0,_vec.rot)(b.sub(a).norm(),-PI5).scale(l);Math.random()<rotProp.prob&&(offset=offset.rotNoise(l*rotProp.noise));var animStps=l*animStpMult,ato=a.copy().slide(animStps,a.add(offset),props),bto=b.copy().slide(animStps,b.add(offset));return{animStps:animStps,ext:[ato,bto],stop:[ato.anim.fx(1),bto.anim.fx(1)]}}function getWide(objs){var wide=[];return objs.forEach(function(s,i){s.props&&s.props.wide&&wide.push([objs[i],objs[i+1]])}),wide}function doInside(boundary,v){return v.x<boundary.xMax-10&&v.x>boundary.xMin+10&&v.y<boundary.yMax-10&&v.y>boundary.yMin+10}function inside(boundary,res){return res.stop.map(function(v){return doInside(boundary,v)}).every(identity)}function getIntroduction(ctx,width,height){function doReload(){(0,_utils.print)("reloading page."),reloadCount=0,location.reload(!0)}function doUpdate(res){state.objs=res.objs,state.next+=Math.ceil(res.animStps),Math.random()<.4&&state.circs.push(res.circ),Math.random()<.15&&res.lines.length>4&&res.lines.forEach(function(l){return state.lines.push(l)})}function scene(){if(ctx.fillStyle=BACK,(0,_draw.clear)(ctx,width,height),ctx.fillStyle=FRONT,ctx.strokeStyle=FRONT,state.itt>state.next){var l=Math.floor(rndbtwn(15,extrudeLength)),i=Math.max(0,Math.floor(Math.random()*state.objs.length-1)),res=extrude(state.objs,i,l,Math.random()<.2?{wide:!0}:null);inside(boundary,res)&&doUpdate(res)}state=doAnimate(state),ctx.lineWidth=lineWide,(0,_draw.drawPath)(ctx,state.objs),ctx.lineWidth=lineVeryWide,ctx.strokeStyle=FRONT2,(0,_draw.drawLines)(ctx,getWide(state.objs)),ctx.strokeStyle=FRONT,ctx.lineWidth=lineMedThin,(0,_draw.drawDots)(ctx,state.circs,4,!1),ctx.lineWidth=lineThin,ctx.strokeStyle=FRONT2,(0,_draw.drawLines)(ctx,state.lines),(mobile&&state.itt>3500||!mobile&&state.itt>9e3)&&((0,_utils.print)("limit reached."),reloadCount+=1,reloadCount>=reloadMax?doReload():((0,_utils.print)("reload count: "+reloadCount),resetState()))}ctx.lineJoin="miter",ctx.miterLimit=2;var boundary=(0,_utils.print)((0,_draw.getBoundary)(width,height)),isize=.07*Math.min(width,height),mobile=isize<40;(0,_utils.print)("isize: "+isize),(0,_utils.print)("mobile: "+mobile);var lineVeryWide=mobile?8:20,lineWide=mobile?3:5,lineThin=mobile?1.5:2,lineMedThin=mobile?1.5:3,extrudeLength=2*isize,animStpMult=1.65,rotProp={prob:.13,noise:.6},reloadMax=1e5,reloadCount=0,state={},resetState=function(){(0,_utils.print)("reset state"),(0,_utils.print)(state.itt),state=getState(isize,new _vec.vec(boundary.xMid,boundary.yMid))};resetState();var extrude=function(objs,i,l,props){var a=objs[i],b=objs[i+1],res=doExtrude(a,b,l,animStpMult,rotProp,props),mid=res.ext[0].add(res.ext[1]).scale(.5),gl=.5*(res.stop[0].sub(a).len()+res.stop[1].sub(b).len()),nGrates=Math.floor(gl/(mobile?9:6));return{stop:res.stop,animStps:res.animStps,objs:objs.slice(0,i+1).concat(res.ext).concat(objs.slice(i+1)),circ:mid,lines:grates(nGrates,a,res.stop[0],b,res.stop[1])}};return scene}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getIntroduction=getIntroduction;var _array=__webpack_require__(3),_draw=__webpack_require__(4),_utils=__webpack_require__(1),_vec=__webpack_require__(5),PI=Math.PI,PI5=.5*PI,BACK="rgba(255, 255, 255, 1.0)",FRONT="rgba(0, 0, 0, 0.95)",FRONT2="rgba(0, 0, 0, 0.7)"},function(module,exports){"use strict";function getNs(n,v){for(var res=[],i=0;i<n;i++)res.push(v);return res}function getRnd(n,min,max){for(var res=[],i=0;i<n;i++)res.push(min+Math.random()*(max-min));return res}function getRndXRndY(n,xMin,xMax,yMin,yMax){for(var res=[],i=0;i<n;i++)res.push({x:xMin+Math.random()*(xMax-xMin),y:yMin+Math.random()*(yMax-yMin)});return res}function getLinspace(n,mi,ma){for(var res=[],s=(ma-mi)/(n-1),y=mi,i=0;i<n;i++)res.push(y),y+=s;return res}function getLinspaceGrid(nx,ny,xMin,xMax,yMin,yMax){for(var res=[],sx=(xMax-xMin)/(nx-1),sy=(yMax-yMin)/(ny-1),y=yMin,i=0;i<ny;i++){for(var x=xMin,j=0;j<nx;j++)res.push({x:x,y:y}),x+=sx;y+=sy}return res}function getRndXLinspaceY(n,xMin,xMax,yMin,yMax){for(var res=[],s=(yMax-yMin)/(n-1),y=yMin,i=0;i<n;i++)res.push({x:xMin+Math.random()*(xMax-xMin),y:y}),y+=s;return res}function getLinspaceXLinspaceY(n,xMin,xMax,yMin,yMax){for(var res=[],sX=(xMax-xMin)/(n-1),sY=(yMax-yMin)/(n-1),x=xMin,y=yMin,i=0;i<n;i++)res.push({x:x,y:y}),x+=sX,y+=sY;return res}function getCirc(n,ix,iy,rad){for(var res=[],d=TWOPI/n,a=0,i=0;i<n;i++){var x=ix+Math.cos(a)*rad,y=iy+Math.sin(a)*rad;res.push({x:x,y:y}),a+=d}return res}function getRndCirc(n,ix,iy,rad){for(var res=[],i=0;i<n;i++){var a=Math.random()*TWOPI,x=ix+Math.cos(a)*rad,y=iy+Math.sin(a)*rad;res.push({x:x,y:y})}return res}function randomWalk(points,noise){return points.map(function(p){var rnd=Math.random()*TWOPI;return{x:p.x+Math.cos(rnd)*noise,y:p.y+Math.sin(rnd)*noise}})}function randomWalkScale(points,noise,scale){return points.map(function(p,i){var rnd=Math.random()*TWOPI;return{x:p.x+Math.cos(rnd)*noise*scale[i],y:p.y+Math.sin(rnd)*noise*scale[i]}})}function limit(v,ma,mi){return Math.max(Math.min(v,ma),mi)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNs=getNs,exports.getRnd=getRnd,exports.getRndXRndY=getRndXRndY,exports.getLinspace=getLinspace,exports.getLinspaceGrid=getLinspaceGrid,exports.getRndXLinspaceY=getRndXLinspaceY,exports.getLinspaceXLinspaceY=getLinspaceXLinspaceY,exports.getCirc=getCirc,exports.getRndCirc=getRndCirc,exports.randomWalk=randomWalk,exports.randomWalkScale=randomWalkScale,exports.limit=limit;var TWOPI=2*Math.PI},function(module,exports){"use strict";function drawPath(ctx,points){var close=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];ctx.beginPath();var start=points[0].pt();ctx.moveTo(start.x,start.y);for(var i=1;i<points.length;i++){var o=points[i].pt();ctx.lineTo(o.x,o.y)}close&&ctx.closePath(),ctx.stroke()}function drawLine(ctx,line){var start=line[0].pt(),stop=line[1].pt();ctx.beginPath(),ctx.moveTo(start.x,start.y),ctx.lineTo(stop.x,stop.y),ctx.stroke()}function drawLines(ctx,lines){lines.forEach(function(l){return drawLine(ctx,l)})}function drawDots(ctx,points,rad){var fill=arguments.length>3&&void 0!==arguments[3]&&arguments[3];points.forEach(function(p){ctx.beginPath(),ctx.arc(p.x,p.y,rad,0,TWOPI),fill?ctx.fill():ctx.stroke()})}function clear(ctx,width,height){ctx.beginPath(),ctx.rect(0,0,width,height),ctx.fill()}function getBoundary(width,height){var edgeX=width,edgeTopY=height,edgeBottomY=height,xl=0,xr=width,yb=height,yt=0,xMax=edgeX,xMin=width-edgeX,yMax=edgeTopY,yMin=height-edgeBottomY,yMid=.5*(yMax+yMin),xMid=.5*(xMax+xMin);return{xMin:xMin,xMax:xMax,yMin:yMin,yMax:yMax,yMid:yMid,xMid:xMid,xl:xl,xr:xr,yb:yb,yt:yt}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawPath=drawPath,exports.drawLine=drawLine,exports.drawLines=drawLines,exports.drawDots=drawDots,exports.clear=clear,exports.getBoundary=getBoundary;var TWOPI=2*Math.PI},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ease(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}function box(w,h,v){return[new vec(v.x-w,v.y-h),new vec(v.x+w,v.y-h),new vec(v.x+w,v.y+h),new vec(v.x-w,v.y+h),new vec(v.x-w,v.y-h)]}function rot(s,angle){var r=Math.atan2(s.y,s.x)+angle;return new vec(Math.cos(r),Math.sin(r))}function angleToVec(a){return new vec(Math.cos(a),Math.sin(a))}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.box=box,exports.rot=rot,exports.angleToVec=angleToVec;var PI=Math.PI,PI5=.5*Math.PI,vec=exports.vec=function(){function vec(x,y){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,anim=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,vec),this.x=x,this.y=y,this.anim=anim,this.props=props}return _createClass(vec,[{key:"pt",value:function(){return{x:this.x,y:this.y}}},{key:"setAnim",value:function(a){return this.anim=a,this}},{key:"setProps",value:function(p){return this.props=p,this}},{key:"slide",value:function(n,to){var props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,start=this.copy(),stp=to.sub(this);return this.setAnim({type:"slide",curr:0,inc:1/n,fx:function(s){return start.add(stp.scale(ease(s))).setProps(props)}})}},{key:"doAnim",value:function(){if(this.anim){var _anim=this.anim,newVec=_anim.fx(_anim.curr);return _anim.curr<1&&(_anim.curr+=_anim.inc,newVec.setAnim(_anim)),newVec}return this}},{key:"copy",value:function(){return new vec(this.x,this.y,this.props)}},{key:"fullCopy",value:function(){return new vec(this.x,this.y,this.props,anim=this.anim)}},{key:"sub",value:function(v){return new vec(this.x-v.x,this.y-v.y)}},{key:"add",value:function(v){return new vec(this.x+v.x,this.y+v.y)}},{key:"scale",value:function(s){return new vec(this.x*s,this.y*s)}},{key:"vscale",value:function(v){return new vec(this.x*v.x,this.y*v.y)}},{key:"rotNoise",value:function(){var rad=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,nr=-PI5+Math.random()*PI;return this.copy().add(angleToVec(nr).scale(rad))}},{key:"len",value:function(){var d2=Math.pow(this.x,2)+Math.pow(this.y,2);return d2>0?Math.sqrt(d2):1}},{key:"norm",value:function(){var d2=Math.pow(this.x,2)+Math.pow(this.y,2);if(d2>0){var d=Math.sqrt(d2);return new vec(this.x/d,this.y/d)}return new vec(0,0)}}]),vec}()}]);