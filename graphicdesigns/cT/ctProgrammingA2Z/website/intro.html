<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Introduction to A2Z | Daniel Shiffman</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    
    
    <script src="js/jquery.js"></script>
    <script src="js/main.js"></script>
    
</head>


  <body>

    


      <link rel="stylesheet" type="text/css" href="css/prism.css">
<link rel="stylesheet" type="text/css" href="css/highlight.css">
<link rel="stylesheet" type="text/css" href="css/a2z.css">
<script src="js/blog.js"></script>
<script src="js/prism.js"></script>

<section class="left-container out a2z">
  <h1>Programming from A to Z</h1>
  <p><br/>

    <a href="index.html" class="body-link primary">about</a> 
    <a href="../A2Z-F16/README.md" class="body-link primary">syllabus</a>
    <a href="../A2Z-F16" class="body-link primary">All example source code</a>

  </p>
  <span class="line-charm first"></span>
  <div class="content-wrapper article a2z">
    <h2 id="technical-overview">Technical Overview</h2>

<h3 id="git-github-github-pages">Git, Github, Github pages</h3>

<p>One of the first things we’ll explore in this class is git, github, and github pages.  By no means, is github pages required for hosting your projects.  But it’s free and fast and lives on github.  So there are many reasons why you might like to consider it, at least during the homework / experimentation stage / of a project.  Here are some resources for getting started.</p>

<ul>
  <li>Git and Github
    <ul>
      <li><a href="http://sklise.com/2012/09/22/introduction-to-git/">Introduction to Git and Command Line by Steve Klise</a></li>
      <li><a href="http://sklise.com/2012/10/07/git-workflow-beginner/">Git workflow for beginners</a></li>
      <li><a href="https://try.github.io/levels/1/challenges/1">“Try” Git tutorial</a></li>
    </ul>
  </li>
  <li>Github Pages:
    <ul>
      <li><a href="https://www.thinkful.com/learn/a-guide-to-using-github-pages/">A Guide to Github pages</a></li>
    </ul>
  </li>
</ul>

<iframe width="312" height="175" src="https://www.youtube.com/embed/BCQHnlnPusY?list=PLRqwX-V7Uu6ZF9C0YMKuns9sLDzK6zoiV" frameborder="0" allowfullscreen=""></iframe>
<iframe width="312" height="175" src="https://www.youtube.com/embed/bFVtrlyH-kc?list=PLRqwX-V7Uu6ZF9C0YMKuns9sLDzK6zoiV" frameborder="0" allowfullscreen=""></iframe>

<h3 id="javascript">JavaScript</h3>

<p>The core language for this class is JavaScript.  If JavaScript is new to you, I would suggest starting with the the  <a href="http://eloquentjavascript.net/">first four chapters of Eloquent JavaScript</a>.  And there are <a href="../A2Z-F17/index.html#learning--intro">many more resources for learning online</a> as well.</p>

<h3 id="p5js">p5.js</h3>

<p>The framework we’ll be exploring is <a href="http://p5js.org">p5.js</a>.  Here are some links to get your started.</p>

<ul>
  <li><a href="https://github.com/processing/p5.js/wiki/p5.js-overview">Overview of p5.js</a></li>
</ul>

<iframe width="525" height="300" src="https://www.youtube.com/embed/8j0UDiN7my4?list=PLRqwX-V7Uu6Zy51Q-x9tMWIv9cueOFTFA" frameborder="0" allowfullscreen=""></iframe>

<h3 id="html-and-css">HTML and CSS</h3>

<p>The class will assume basic knowledge of HTML and CSS.  Of course I’m happy to answer questions and go over these topics, but they won’t be explicitly covered in class, other than in the context of JavaScript DOM manipulation.  For review, I would suggest reading the p5.js <a href="https://github.com/processing/p5.js/wiki/Intro-to-HTML-and-CSS">HTML and CSS overview</a>.  The <a href="http://www.htmlandcssbook.com/">HTML and CSS book</a> is also excellent.</p>

<ul>
  <li><a href="../A2Z-F17/week1-dom/01_html_css/">basic HTML and CSS example</a>, <a href="../A2Z-F17/week1-dom/01_html_css/">source code</a></li>
</ul>

<iframe width="312" height="175" src="https://www.youtube.com/embed/URSH0QpxKo8?list=PLRqwX-V7Uu6bI1SlcCRfLH79HZrFAtBvX" frameborder="0" allowfullscreen=""></iframe>
<iframe width="312" height="175" src="https://www.youtube.com/embed/zGL8q8iQSQw?list=PLRqwX-V7Uu6bI1SlcCRfLH79HZrFAtBvX" frameborder="0" allowfullscreen=""></iframe>

<h3 id="dom-manipulation-with-js">DOM manipulation with JS</h3>

<p>The first JavaScript task I’ll demonstrate is “DOM manipulation”, i.e. using programming to change the HTML and CSS of a page on the fly.  This is something possible with native JavaScript, as well as many different JS frameworks and libraries, the most well-known probably being <a href="https://jquery.com/">JQuery</a>.  In class, we’ll use the p5.js DOM library primarily, as well as dig into native JS and other frameworks when necessary.</p>

<ul>
  <li><a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas">p5.js DOM library tutorial</a></li>
</ul>

<p>The key functions and topics I will discuss in class are:</p>

<ul>
  <li>The core “create” functions — <code class="language-plaintext highlighter-rouge">createElement()</code>, <code class="language-plaintext highlighter-rouge">createP()</code>, <code class="language-plaintext highlighter-rouge">createDiv()</code>, <code class="language-plaintext highlighter-rouge">createImg()</code>.</li>
  <li>Moving things around in the DOM — <code class="language-plaintext highlighter-rouge">parent()</code>, <code class="language-plaintext highlighter-rouge">child()</code></li>
  <li>Making interface elements — <code class="language-plaintext highlighter-rouge">createButton()</code>, <code class="language-plaintext highlighter-rouge">createSlider()</code>, <code class="language-plaintext highlighter-rouge">createInput()</code>, <code class="language-plaintext highlighter-rouge">createSelect()</code>, <code class="language-plaintext highlighter-rouge">createCheckbox()</code>.</li>
  <li>Events — <code class="language-plaintext highlighter-rouge">mousePressed()</code>, <code class="language-plaintext highlighter-rouge">mouseOver()</code>, <code class="language-plaintext highlighter-rouge">mouseOut()</code>, <code class="language-plaintext highlighter-rouge">changed()</code>, and more?  What about <code class="language-plaintext highlighter-rouge">addEventListener()</code>?</li>
  <li>When to use create vs select — <code class="language-plaintext highlighter-rouge">select()</code> and <code class="language-plaintext highlighter-rouge">selectAll()</code>, id vs class vs tag</li>
  <li>Applying CSS styles — <code class="language-plaintext highlighter-rouge">style()</code> (and when to use a CSS file).</li>
</ul>

<iframe width="525" height="300" src="https://www.youtube.com/embed/lAtoaRz78I4?list=PLRqwX-V7Uu6Zy51Q-x9tMWIv9cueOFTFA" frameborder="0" allowfullscreen=""></iframe>

<h3 id="examples">Examples</h3>

<ul>
  <li><a href="../A2Z-F17/week1-dom/02_build_html_css_p5/">create HTML elements</a>, <a href="../A2Z-F17/week1-dom/02_build_html_css_p5/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/03_select_parent_child/">using select, and parent/child</a>, <a href="../A2Z-F17/week1-dom/../A2Z-F17/week1-dom/03_select_parent_child/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/04_css_with_p5_style/">dynamic CSS with <code class="language-plaintext highlighter-rouge">style()</code></a>, <a href="../A2Z-F17/week1-dom/04_css_with_p5_style/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/05_absolute_position_DOM/">absolute positioning of DOM elements</a>, <a href="../A2Z-F17/week1-dom/05_absolute_position_DOM/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/06_mousepressed/">handling events: mousePressed</a>, <a href="../A2Z-F17/week1-dom/06_mousepressed/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/07_mouseover_mouseout/">handling events: mouseOver, mouseOut</a>, <a href="../A2Z-F17/week1-dom/07_mouseover_mouseout/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/08_animateDOM/">animating a DOM element</a>, <a href="../A2Z-F17/week1-dom/08_animateDOM/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/09_interface/">building a simple interface</a>, <a href="../A2Z-F17/week1-dom/09_interface/">source code</a></li>
  <li><a href="../A2Z-F17/week1-dom/10_sliders/">weird sliders experiment</a>, <a href="../A2Z-F17/week1-dom/10_sliders/">source code</a></li>
</ul>

<h3 id="javascript-objects">JavaScript Objects</h3>

<p>JavaScript objects will be key to just about everything we do this semester.  We’ll be using objects for DOM manipulation like <code class="language-plaintext highlighter-rouge">p5.Element</code> and the native JS <code class="language-plaintext highlighter-rouge">Element</code>.  We’ll be exploring data coming in as JSON (“JavaScript Object Notation”).  We’ll focus a lot on the JS <code class="language-plaintext highlighter-rouge">String</code> object as well as objects from other libraries.  And we’ll write our own objects for analyzing and generating text.  The examples will use <a href="http://es6-features.org/#Classes">ES6 classes</a>.</p>

<iframe width="312" height="175" src="https://youtu.be/T-HGdc8L-7w?list=PLRqwX-V7Uu6Zy51Q-x9tMWIv9cueOFTFA" frameborder="0" allowfullscreen=""></iframe>
<iframe width="312" height="175" src="https://youtu.be/rHiSsgFRgx4?list=PLRqwX-V7Uu6Zy51Q-x9tMWIv9cueOFTFA" frameborder="0" allowfullscreen=""></iframe>

<p><span class="line-charm first"></span></p>

<h2 id="working-with-text">Working with Text</h2>

<h3 id="all-examples">All examples</h3>

<ul>
  <li><a href="../A2Z-F17/week1-strings/01_loadStrings">loadStrings</a> — <a href="../A2Z-F17/week1-strings/01_loadStrings">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/02_loadStrings_callback">loadStrings with callback</a> — <a href="../A2Z-F17/week1-strings/02_loadStrings_callback">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/03_loadFile_Menu">“choose files” button</a> — <a href="../A2Z-F17/week1-strings/03_loadFile_Menu">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/04_loadFile_DragDrop">“drag and drop” files</a> — <a href="../A2Z-F17/week1-strings/04_loadFile_DragDrop">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/05_input_elt">text input element</a> — <a href="../A2Z-F17/week1-strings/05_input_elt">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/06_input_elt_canvas">text input element with canvas</a> — <a href="../A2Z-F17/week1-strings/06_input_elt_canvas">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/07_textarea">textarea element</a> — <a href="../A2Z-F17/week1-strings/07_textarea">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/08_all_together">many loading options all together</a> — <a href="../A2Z-F17/week1-strings/08_all_together">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/09_flesch">Flesch Index Calculator</a> — <a href="../A2Z-F17/week1-strings/09_flesch">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/10_cut_up_machine">Cut-Up Machine</a> — <a href="../A2Z-F17/week1-strings/10_cut_up_machine">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/11_erasure">Erasure Poetry Machine</a> — <a href="../A2Z-F17/week1-strings/11_erasure">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/12_diastic">Diastic Machine</a> — <a href="../A2Z-F17/week1-strings/12_diastic">source code</a></li>
  <li><a href="../A2Z-F17/week1-strings/13_rita_sentence">Simple Rita Test</a> — <a href="../A2Z-F17/week1-strings/13_rita_sentence">source code</a></li>
</ul>

<iframe width="312" height="175" src="https://www.youtube.com/embed/uNQSVU0IKec?list=PLRqwX-V7Uu6YrbSJBg32eTzUU50E2B8Ch" frameborder="0" allowfullscreen=""></iframe>
<iframe width="312" height="175" src="https://www.youtube.com/embed/0Mq2CxspF5s?list=PLRqwX-V7Uu6YrbSJBg32eTzUU50E2B8Ch" frameborder="0" allowfullscreen=""></iframe>

<h3 id="loadstrings-and-preload">loadStrings() and preload()</h3>

<p>The whole point of this week is to work with programmatic text mashups in the browser.  Take a look at the <a href="../A2Z-F17/week1-strings/10_cut_up_machine/">William Burroughs’ Cut-Up</a> example.  We’ll need two essential skills here — how to load text (from a file or user) and how to work with JavaScript Strings.  Let’s first start with loading text from a file.  The simplest way to do this in p5 is with <code class="language-plaintext highlighter-rouge">loadStrings()</code>.  It loads a local file (accessed by its relative path to the html file).  The simplest way to get the data is to use <code class="language-plaintext highlighter-rouge">preload()</code> which guarantees that the data is read before <code class="language-plaintext highlighter-rouge">setup()</code> triggers.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">lines</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">preload</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">lines</span> <span class="o">=</span> <span class="nx">loadStrings</span><span class="p">(</span><span class="dl">'</span><span class="s1">path/file.txt</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Note the naming of the variable <code class="language-plaintext highlighter-rouge">lines</code>.  One of the odd nuances of <code class="language-plaintext highlighter-rouge">loadStrings()</code> is that it loads all the text into into an array, with each “line” of text as a separate element of an array, i.e. the text file:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">one</span>
<span class="nx">two</span>
<span class="nx">three</span></code></pre></figure>

<p>comes in as:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">]</span></code></pre></figure>

<p>This is convenient in many cases, but for us right now, we just want all the text as one giant string.  Therefore, we can use the <code class="language-plaintext highlighter-rouge">join()</code> function to put it back together. This can’t happen until <code class="language-plaintext highlighter-rouge">setup()</code> however, since the data isn’t guaranteed to be loaded until then.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">lines</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">txt</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">preload</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">lines</span> <span class="o">=</span> <span class="nx">loadStrings</span><span class="p">(</span><span class="dl">'</span><span class="s1">path/file.txt</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// join() joins the elements of an array</span>
  <span class="c1">// Here we pass in a line break to retain formatting</span>
  <span class="nx">txt</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">lines</span><span class="p">,</span> <span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h3 id="loadstrings-and-a-callback">loadStrings and a callback</h3>

<p>While using <code class="language-plaintext highlighter-rouge">preload()</code> is a nice, quick and easy trick to getting text in, it’s not how you might typically see code in JavaScript working.  The flow of a program in JavaScript is usually a sequence of events and functions can act as blocks of code triggered when certain events occur.  These functions are known as “callbacks”, they are “called back” when the event is triggered.  You’ve likely seen this with the p5.js dom functions <code class="language-plaintext highlighter-rouge">mousePressed()</code>, <code class="language-plaintext highlighter-rouge">mouseOver()</code>, <code class="language-plaintext highlighter-rouge">mouseOut()</code>, etc.</p>

<p>Loading data works in a similar way.  There is a moment where the code asks to load the file, and then an event that follows later when the data is actually loaded (there could also be an “error” event if there is a problem with the file.)  <code class="language-plaintext highlighter-rouge">loadStrings()</code> works exactly this way when you pass it two arguments — the name of the file, and a function that will executed when the data from the file is ready (the callback).</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">txt</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">loadStrings</span><span class="p">(</span><span class="dl">'</span><span class="s1">path/file.txt</span><span class="dl">'</span><span class="p">,</span> <span class="nx">fileready</span><span class="p">)</span>
<span class="p">}</span></code></pre></figure>

<p>The use of a callback is very typical of JavaScript, and we’ll be seeing many examples of this over the course of the semester.  It’s also possible to write an “anonymous” function directly as an argument to <code class="language-plaintext highlighter-rouge">loadStrings()</code> but this will make the code a bit harder to follow.  Let’s take a look at the <code class="language-plaintext highlighter-rouge">fileready()</code> function.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// The data from the file comes in as the array lines</span>
<span class="kd">function</span> <span class="nx">fileready</span><span class="p">(</span><span class="nx">lines</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Here we pass in a line break to retain formatting</span>
  <span class="nx">txt</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">lines</span><span class="p">,</span> <span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The function takes a single argument: lines.  lines containa all of the text from the file in a array of strings (unless there was an error).</p>

<h3 id="user-selected-files">User-selected files</h3>

<p>The next way of getting text in I want to examine is with a user-selected file.  This can be accomplished one of two ways, a select file button (as below) or a “drop zone” (an area in the page that a user can drag and drop a file.)</p>

<h4 id="choose-file-button">Choose file button</h4>

<p><input type="file" multiple="" /></p>

<p>The choose file button can be generated fairly easily with p5.js using <code class="language-plaintext highlighter-rouge">createFileInput()</code>.  <code class="language-plaintext highlighter-rouge">createFileInput()</code> requires only a single argument, a callback for when the file(s) are loaded.  A second argument <code class="language-plaintext highlighter-rouge">'multiple'</code> is optional if you want to allow the user to select multiple files.  In the case of multiple files, the callback is triggered once for each file.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">fileSelect</span> <span class="o">=</span> <span class="nx">createFileInput</span><span class="p">(</span><span class="nx">gotFile</span><span class="p">,</span> <span class="dl">'</span><span class="s1">multiple</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">gotFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do something with the file here</span>
<span class="p">}</span></code></pre></figure>

<p>The argument passed to the <code class="language-plaintext highlighter-rouge">gotFile()</code> callback is a <code class="language-plaintext highlighter-rouge">p5.File</code> object.  It contains metadata about the file such as its name, type, and size, as well as the actual contents of the file, its “data.”  All of these are available as properties of the <code class="language-plaintext highlighter-rouge">p5.File</code> object and accessible with dot syntax.  The following more fleshed out version of the callback creates DOM elements displaying the metadata and contents.  Note how a different action can be performed depending on the file’s type.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">gotFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">createDiv</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">size</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">bytes</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Handle image and text differently</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">image</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">createImg</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">createP</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h4 id="drop-zone">Drop zone</h4>

<iframe width="525" height="300" src="https://www.youtube.com/embed/o4UmGrPst_c" frameborder="0" allowfullscreen=""></iframe>

<p>Another, often more convenient, way to accept files from a user is to allow the user to “drag and drop” files in the page itself.  To do this, you first need to create and style a div that will act as the “drop zone”.  For example:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p&gt;&lt;div</span> <span class="na">id=</span><span class="s">"drop_zone"</span><span class="nt">&gt;</span>drag a file<span class="nt">&lt;/div&gt;&lt;/p&gt;</span></code></pre></figure>

<p><div id="drop_zone">drag a file</div></p>

<p>There’s nothing particularly special about the CSS for the above drop zone, just some padding and a dotted line.</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#drop_zone</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="nl">border-style</span><span class="p">:</span> <span class="nb">dotted</span><span class="p">;</span>
  <span class="nl">border-width</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>This could all be generated in p5 using <code class="language-plaintext highlighter-rouge">createDiv()</code> but it’s nice to also see scenarios where the HTML is “hard-coded” and then accessed with JavaScript.  Since the div has an id <code class="language-plaintext highlighter-rouge">drop_zone</code>, the p5 <code class="language-plaintext highlighter-rouge">select()</code> function can be used to grab the DOM element.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">dropZone</span> <span class="o">=</span> <span class="nx">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">#drop_zone</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p>Note the use of the hash sign <code class="language-plaintext highlighter-rouge">#</code> to indicate DOM element id.  Once you have a DOM element to act as a drop zone there are three events you can handle — <code class="language-plaintext highlighter-rouge">dragOver()</code>, <code class="language-plaintext highlighter-rouge">dragLeave()</code>, and <code class="language-plaintext highlighter-rouge">drop()</code>.  <code class="language-plaintext highlighter-rouge">dragOver()</code> and <code class="language-plaintext highlighter-rouge">dragLeave()</code> are just like <code class="language-plaintext highlighter-rouge">mouseOver()</code> and <code class="language-plaintext highlighter-rouge">mouseOut()</code>, only instead of just hovering over the element, the events are triggered only if the user is dragging a file over the element.  This can be useful for giving the user some feedback as to what is going on:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Handle the two events</span>
<span class="nx">dropZone</span><span class="p">.</span><span class="nx">dragOver</span><span class="p">(</span><span class="nx">highlight</span><span class="p">);</span>
<span class="nx">dropZone</span><span class="p">.</span><span class="nx">dragLeave</span><span class="p">(</span><span class="nx">unHighlight</span><span class="p">);</span>

<span class="c1">// Set a background style to gray</span>
<span class="kd">function</span> <span class="nx">highlight</span><span class="p">()</span>
  <span class="nx">dropZone</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">background</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">#AAA</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// Set it back to nothing</span>
<span class="kd">function</span> <span class="nx">unHighlight</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">dropZone</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">background</span><span class="dl">'</span><span class="p">,</span><span class="dl">''</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The event we care most about is <code class="language-plaintext highlighter-rouge">drop()</code>.  This event requires two callbacks — an event to handle the moment the user drops the file(s), and a callback that is triggered when each file is loaded and ready to be accessed.  In the code below, the arguments are in the reverse order, first is the callback for handling the files, and second is the callback for the moment of drop.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">dropZone</span><span class="p">.</span><span class="nx">drop</span><span class="p">(</span><span class="nx">gotFile</span><span class="p">,</span> <span class="nx">unHighlight</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">gotFile</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">createDiv</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span>  <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">size</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">, bytes</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// Handle image and text differently</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">image</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">createImg</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">createP</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Note how I am re-using the exact same <code class="language-plaintext highlighter-rouge">gotFile()</code> function that we had with the “choose files” button.</p>

<h3 id="textarea-and-contenteditable">&lt;textarea&gt; and “contenteditable”</h3>

<p>If you want to get a large body of text typed in by a user, <code class="language-plaintext highlighter-rouge">createInput()</code> isn’t a great choice.  It’s meant more for just a couple words or a single sentence:</p>

<p>Type a sentence: <input size="50" value="I can only fit one sentence here in this box." /></p>

<p>For a larger body of text the <code class="language-plaintext highlighter-rouge">&lt;textarea&gt;</code> element can be generated using <code class="language-plaintext highlighter-rouge">createElement()</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">textarea</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Some text to start initially.</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p><textarea>Some text to start initially.</textarea></p>

<p>The p5 <code class="language-plaintext highlighter-rouge">size()</code> function can be used to adjust the areas default size.</p>

<p>It’s also possible to simply use a <code class="language-plaintext highlighter-rouge">div</code> or <code class="language-plaintext highlighter-rouge">p</code> element and assign the attribute <code class="language-plaintext highlighter-rouge">contenteditable</code>.  This makes any DOM element editable by the user (and you can the capture the content of that element with the <code class="language-plaintext highlighter-rouge">html()</code> function.)  For example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">createP</span><span class="p">(</span><span class="dl">'</span><span class="s1">this is editable</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">attribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">contenteditable</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">true</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p>Note how you can edit this text below:</p>

<p contenteditable="" style="padding: 4px; background-color: #CCC">this will be editable</p>

<p>As always, these elements can also be written into the HTML directly and accessed in p5 with <code class="language-plaintext highlighter-rouge">select()</code> and <code class="language-plaintext highlighter-rouge">selectAll()</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"area"</span><span class="nt">&gt;</span>Some text to start initially.<span class="nt">&lt;/textarea&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">contenteditable</span> <span class="na">id=</span><span class="s">"editableP"</span><span class="nt">&gt;</span>this will be editable<span class="nt">&lt;/p&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="nx">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">#area</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">select</span><span class="p">(</span><span class="dl">'</span><span class="s1">#editableP</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<h3 id="strings-in-js">Strings in JS</h3>

<iframe width="525" height="300" src="https://www.youtube.com/embed/DcoAjEZYies?list=PLRqwX-V7Uu6YrbSJBg32eTzUU50E2B8Ch" frameborder="0" allowfullscreen=""></iframe>

<p>One you have data from a file or user input (or user file input!), the next step is to do something interesting with it.  For this week, it’s up to you to invent something.  To demonstrate some possibilities I’ll first run through some of the basic functions available as part of the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String object</a> and then describe one scenario for analyzing text — the Flesch index.</p>

<p>I should note that almost everything I am doing this week could be improved or expanded with regular expressions, but I am explicitly saving that as a topic for next week.</p>

<p>A String, at its core, is really just a fancy way of storing an array of characters.  With the String object, we might find ourselves writing code like.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sometext</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">h</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">e</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">l</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">l</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">o</span><span class="dl">'</span><span class="p">];</span></code></pre></figure>

<p>Interestingly enough, there is no distinction between an individual character or a string in JavaScript.  Both of the variables below are storing the same datatype.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">;</span></code></pre></figure>

<p>In JavaScript, strings can be literal primitives or objects.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s1</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">;</span>               <span class="c1">// a primitive</span>
<span class="kd">var</span> <span class="nx">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>   <span class="c1">// an object</span></code></pre></figure>

<p>For the most part, this is a distinction you don’t have to worry about.  JavaScript will automatically convert a primitive String into an object when necessary. In general, however, it’s good practice to initialize  strings as primitives to increase performance.</p>

<h3 id="manipulating-strings">Manipulating Strings</h3>

<p>JavaScript provides us with a basic set of strings functions that allow for simple manipulation and analysis (again, leaving out regular expression for now!) All of the availabe String properties and functions are laid out in <a href="ttp://docs.oracle.com/javase/7/docs/api/java/lang/String.html">the JavaScript reference</a>, and I’ll explore a few useful ones here.  Let’s take a closer look at three: <code class="language-plaintext highlighter-rouge">indexOf()</code>, <code class="language-plaintext highlighter-rouge">substring()</code>, and the <code class="language-plaintext highlighter-rouge">length</code> property.</p>

<p><code class="language-plaintext highlighter-rouge">indexOf()</code> locates a sequence of characters within a string. For example, run this code and examine the result:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sentence</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick brown fox jumps over the lazy dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sentence</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">quick</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sentence</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">fo</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sentence</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">The</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sentence</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">blah blah</span><span class="dl">'</span><span class="p">));</span></code></pre></figure>

<p>Note that <code class="language-plaintext highlighter-rouge">indexOf()</code> returns a <code class="language-plaintext highlighter-rouge">0</code> for the first character, and a <code class="language-plaintext highlighter-rouge">-1</code> if the search phrase is not part of the String.</p>

<p>After you find a certain search phrase within a string, you might want to pull out part of the string and save it in a different variable. This is called a “substring” and you can use java’s <code class="language-plaintext highlighter-rouge">substring()</code> function to take care of this task. Examine and run the following code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sentence</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick brown fox jumps over the lazy dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">phrase</span> <span class="o">=</span> <span class="nx">sentence</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">phrase</span><span class="p">);</span></code></pre></figure>

<p>Note that the substring begins at the specified beginning index (the first argument) and extends to the character at the end index (the second argument) minus one. Thus the length of the substring is end index minus beginning index.</p>

<p>At any given point, you might also want to access the length of the string. This is accomplished this with the length property.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sentence</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick brown fox jumps over the lazy dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sentence</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span></code></pre></figure>

<p>It’s also important to note that you can concatenate (i.e. join) a string together using the <code class="language-plaintext highlighter-rouge">+</code> operator.   With numbers plus means add, with strings (or characters), it means concatenate, i.e.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span><span class="p">;</span>                        <span class="c1">// ADDING TWO NUMBERS!</span>
<span class="kd">var</span> <span class="nx">phrase</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">To be</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> or not to be</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// JOINING TWO STRINGS!</span></code></pre></figure>

<h3 id="splitting">Splitting</h3>

<p>One string-related function that will prove very useful in our text analysis programs is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split">split()</a>.  <code class="language-plaintext highlighter-rouge">split()</code> separates a group of strings embedded into a longer string into an array of strings.</p>

<p>Now the built-in <code class="language-plaintext highlighter-rouge">split()</code> native to JavaScript uses regular expressions, so this week I’ll demonstrate splitting with the p5.js functions <code class="language-plaintext highlighter-rouge">split()</code> and <code class="language-plaintext highlighter-rouge">splitTokens()</code>.</p>

<p>Examine the following code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">spaceswords</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick brown fox jumps over the lazy dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Splits by any space</span>
<span class="kd">var</span> <span class="nx">list1</span> <span class="o">=</span> <span class="nx">split</span><span class="p">(</span><span class="nx">spacewords</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">list1</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">commaswords</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The, quick, brown, fox, jumps, over, the, lazy, dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Splits by any comma followed by a space</span>
<span class="kd">var</span> <span class="nx">list2</span> <span class="o">=</span> <span class="nx">split</span><span class="p">(</span><span class="nx">commaswords</span><span class="p">,</span> <span class="dl">'</span><span class="s1">, </span><span class="dl">'</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">list2</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">list2</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">mishmosh</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">The quick,brown, fox jumps,over,the lazy, dog.</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Splits by any comma OR a space!</span>
<span class="kd">var</span> <span class="nx">list2</span> <span class="o">=</span> <span class="nx">splitTokens</span><span class="p">(</span><span class="nx">mishmosh</span><span class="p">,</span> <span class="dl">'</span><span class="s1">, </span><span class="dl">'</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">list2</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">list2</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// Calculate sum of a list of numbers in a string</span>
<span class="kd">var</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">8,67,5,309</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">numlist</span> <span class="o">=</span> <span class="nx">numbers</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">numlist</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span> <span class="o">=</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">numlist</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>  <span class="c1">// Converting each String into an number!</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum</span><span class="p">);</span></code></pre></figure>

<p>To perform the reverse of split, the p5 function <code class="language-plaintext highlighter-rouge">join()</code> is used.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">words</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">it</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">was</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">dark</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">and</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">stormy</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">night</span><span class="dl">'</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">sentence</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">words</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<h3 id="single-page-analysis--text-mashup-app">Single Page Analysis / Text-Mashup App</h3>

<p>I’ll end this week by looking at a basic example of text analysis.  I’ll read in a file, examine some of its statistical properties, and display a report.  The example will compute the <a href="http://en.wikipedia.org/wiki/Flesch-Kincaid_Readability_Test">Flesch Index</a>  (aka Flesch-Kincaid Reading Ease test), a numeric score that indicates the readability of a text.   The lower the score, the more difficult the text.  The higher, the easier.  For example, texts with a score of 90-100 are, say, around the 5th grade level, wheras 0-30 would be for “college graduates”.</p>

<p>The Flesch Index is computed as a function of total words, total sentences, and total syllables.  It was developed by Dr. Rudolf Flesch and modified by J. P. Kincaid (thus the joint name).  Most word processing programs will compute the Flesch Index for you, which provides us with a nice method to check our results.</p>

<p><strong><em>Flesch Index = 206.835 – 1.015 * (words / sentences) + 84.6 * (syllables / words)</em></strong></p>

<p>The pseudo-code looks something like this:</p>

<ol>
  <li>Read input file into string object</li>
  <li>Count words</li>
  <li>Count syllables</li>
  <li>Count sentences</li>
  <li>Apply formula</li>
  <li>Display results</li>
</ol>

<p>The examples above on this page demonstrate how to read in text from a file and store it in a String object.  Now, all I have to do is examine that string, count the total words, sentences, and syllables, and apply the formula as a final step.</p>

<p>The first thing I’ll do is count the number of words in the text.  We’ve seen in some of the examples above that we can accomplish this by using <code class="language-plaintext highlighter-rouge">split()</code> to split a String up into an array wherever there is a space.  For this example, however, we are going to want to split by more than a space.  A new word occurs whenever there is a space or some sort of punctuation.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">delimiters</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">.:;?! !@#$%^&amp;*()]+</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">splitTokens</span><span class="p">(</span><span class="nx">delimiters</span><span class="p">);</span></code></pre></figure>

<p>Note again how <code class="language-plaintext highlighter-rouge">splitTokens()</code> will split using any of the listed characters as a delimiter. Next week, I will cover how to use regular expressions to split text.</p>

<p>Now that I have split up the text, I can march through all the words (tokens) and count their syllables.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">words</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">word</span> <span class="o">=</span> <span class="nx">words</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="nx">totalSyllables</span> <span class="o">+=</span> <span class="nx">countSyllables</span><span class="p">(</span><span class="nx">word</span><span class="p">);</span>
  <span class="nx">totalWords</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Ok, so <code class="language-plaintext highlighter-rouge">countSyllables()</code> isn’t a function that exists in JavaScript.  I’m going to have to write it myself.   The following method is not the most accurate way to count syllables, but it will do for now.</p>

<p><strong>Syllables = total # of vowels in a word</strong><br /><em>(not counting vowels that appear after another vowel and when ‘e’ is found at the end of the word)</em></p>

<ul>
  <li>“beach” –&gt; one syllable</li>
  <li>“banana” –&gt; three syllables</li>
  <li>“home” –&gt; one syllable</li>
</ul>

<p>The code looks like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// A method to count the number of syllables in a word</span>
<span class="c1">// Pretty basic, just based off of the number of vowels</span>
<span class="c1">// This could be improved</span>
<span class="kd">function</span> <span class="nx">countSyllables</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">syl</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">vowel</span>  <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">word</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="c1">// Check each word for vowels (don't count more than one vowel in a row)</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isVowel</span><span class="p">(</span><span class="nx">word</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">vowel</span> <span class="o">==</span> <span class="kc">false</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">vowel</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">syl</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isVowel</span><span class="p">(</span><span class="nx">word</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">vowel</span> <span class="o">==</span> <span class="kc">true</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">vowel</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">vowel</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">tempChar</span> <span class="o">=</span> <span class="nx">word</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">word</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="c1">// Check for 'e' at the end, as long as not a word w/ one syllable</span>
  <span class="k">if</span> <span class="p">(((</span><span class="nx">tempChar</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">e</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">tempChar</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">E</span><span class="dl">'</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">syl</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">syl</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">syl</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Check if a char is a vowel (count y)</span>
<span class="kd">function</span> <span class="nx">isVowel</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span>      <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">e</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">E</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">i</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">I</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">o</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">O</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">u</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">U</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">y</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">Y</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>  <span class="p">}</span>
  <span class="k">else</span>                               <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Again as you will see next week, the above could be vastly improved using Regular Expressions, but it’s nice as an exercise to learn how to do all the string manipulation manually before you move on to more advanced techniques.</p>

<p>Counting sentences is a bit simpler.  I’ll just split the content using periods, question marks, exclamation points, etc. (“.:;?!”) as delimiters and count the total number of elements in the resulting array.  This isn’t terribly accurate; for example, “My e-mail address is daniel.shiffman@nyu.edu.”  will be counted as three sentences.  Nevertheless, as a first pass, this will do.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Look for sentence delimiters</span>
<span class="kd">var</span> <span class="nx">sentenceDelim</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">.:;?!</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">sentences</span> <span class="o">=</span> <span class="nx">splitTokens</span><span class="p">(</span><span class="nx">sentenceDelim</span><span class="p">);</span>
<span class="nx">totalSentences</span> <span class="o">=</span> <span class="nx">sentences</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span></code></pre></figure>

<p>Now, all we need to do is apply the formula, generate a report as a string (which can be inserted into a DOM element using <a href="http://p5js.org/reference/#/p5.Element/html"><code class="language-plaintext highlighter-rouge">html()</code></a>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Calculate flesch index</span>
<span class="kd">var</span> <span class="nx">f1</span> <span class="o">=</span> <span class="mf">206.835</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">f2</span> <span class="o">=</span> <span class="mf">84.6</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">f3</span> <span class="o">=</span> <span class="mf">1.015</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="nx">totalSyllables</span> <span class="o">/</span> <span class="nx">totalWords</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="nx">totalWords</span> <span class="o">/</span> <span class="nx">totalSentences</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">flesch</span> <span class="o">=</span> <span class="nx">f1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">f2</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">f3</span> <span class="o">*</span> <span class="nx">r2</span><span class="p">);</span>

<span class="c1">// Write Report</span>
<span class="kd">var</span> <span class="nx">report</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>

<span class="nx">report</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">Total Syllables: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">totalSyllables</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">report</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">Total Words    : </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">totalWords</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">report</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">Total Sentences: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">totalSentences</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">report</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">Flesch Index   : </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">flesch</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span></code></pre></figure>

<h3 id="text-mashups">Text mashups</h3>

<iframe width="525" height="300" src="https://www.youtube.com/embed/u-HUtrpyi1c?list=PLRqwX-V7Uu6YrbSJBg32eTzUU50E2B8Ch" frameborder="0" allowfullscreen=""></iframe>

<p>In class, we’ll do an exercise around mashing up text manually.  Here are links to further reading and information about the techniques we discussed, as well as online versions of the algorithms.  For your homework you can choose to work with one of these methods manually or programmatically.</p>

<ul>
  <li>“Cut-ups”
    <ul>
      <li><a href="http://www.writing.upenn.edu/~afilreis/88v/burroughs-cutup.html">Cut-up Method</a> from  Leroi Jones, ed., The Moderns: An Anthology of New Writing in America (NY: Corinth Books, 1963).</li>
      <li><a href="http://www.languageisavirus.com/cutupmachine.html#.VfHCY51Viko">Cut-up machine</a></li>
    </ul>
  </li>
  <li>“Erasures”
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/Erasure_(artform)">Erasure Poetry</a></li>
      <li><a href="http://erasures.wavepoetry.com/erasures.php?sourceid=23">Make an online Erasure</a></li>
    </ul>
  </li>
  <li>“N+7” or “V+__”
    <ul>
      <li><a href="http://www.languageisavirus.com/articles/articles.php?subaction=showcomments&amp;id=1161978000#.VfHDT51Viko">N+7 technique</a></li>
      <li><a href="http://www.spoonbill.org/n+7/">N+7 machine</a></li>
    </ul>
  </li>
  <li>Jackson Mac Low and the Diastic Technique
    <ul>
      <li>Excerpt from Virtual Muse: Experiments In Computer Poetry pgs. 95-96</li>
      <li><a href="http://www.eddeaddad.net/eDiastic/">Online Diastic generator</a></li>
    </ul>
  </li>
</ul>

<h3 id="assignment">Assignment</h3>

<iframe width="525" height="300" src="https://www.youtube.com/embed/YTzVbuV89RE?list=PLRqwX-V7Uu6YrbSJBg32eTzUU50E2B8Ch" frameborder="0" allowfullscreen=""></iframe>

  </div>
</section>
<button class="mobile-quick-links" aria-controls="quicklinks-section" aria-haspopup="true" id="quicklinks-btn">VIEW QUICK LINKS</button>
<aside class="right-container quick-links out" id="quicklinks-section">
  <div class="quick-link">
    <a href="index.html" class="secondary">About the course</a>
  </div>
  <h3>Tutorials</h3>
  <div class="quick-link">
    <a href="intro.html" class="secondary">Introduction - p5.js, JavaScript, and Strings</a>
  </div>
  <div class="quick-link">
    <a href="regex.html" class="secondary">Regular Expressions</a>
  </div>
  <div class="quick-link">
    <a href="closures.html" class="secondary">Closures</a>
  </div>
  <div class="quick-link">
    <a href="data-apis.html" class="secondary">Libraries, Data, and APIs</a>
  </div>
  <div class="quick-link">
    <a href="server-node.html" class="secondary">Server-side programming with node.js</a>
  </div>
  <div class="quick-link">
    <a href="twitter-bots.html" class="secondary">Twitter API and bots with node.js</a>
  </div>
  <div class="quick-link">
    <a href="bot-ec2.html" class="secondary">Deploy Bot to Amazon EC2</a>
  </div>
  <div class="quick-link">
    <a href="bot-heroku.html" class="secondary">Deploy Bot to Heroku</a>
  </div>
  <div class="quick-link">
    <a href="text-analysis.html" class="secondary">Text Analysis</a>
  </div>
  <div class="quick-link">
    <a href="markov.html" class="secondary">N-Grams and Markov Chains</a>
  </div>
  <div class="quick-link">
    <a href="cfg.html" class="secondary">Context-Free Grammar</a>
  </div>
  <div class="quick-link">
    <a href="node-api.html" class="secondary">Creating an API in Node</a>
  </div>
  <div class="quick-link">
    <a href="firebase.html" class="secondary">Database as Service: Firebase</a>
  </div>
  <div class="quick-link">
    <a href="chrome-ext.html" class="secondary">Chrome Extensions</a>
  </div>
</aside>


    <footer class="left-container about out">
    <div class="content-wrapper article">
        <p>Source code for this website can be found on <a href="https://github.com/shiffman/shiffman.net/" target="_blank">Github</a>.</p>
    </div>
</footer>


<script>

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-94163-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>

</html>
