<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Three projector dome simulation</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>



<center><table width=800><tr><td>
<h1>Full dome projection using three projectors</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
July 2005
<p><br><p>

<table width=100%><tr><td valign="top">
<b>Input fisheye image</b><p>
<p align="justify">
The input to a full dome projection is normally a fisheye image, more precisely
an equal angle fisheye (equally spaced lines of latitude). Such fisheye images
may make up the frames of a full dome movie or be created in realtime using OpenGL.
</p>
</td><td width=20>
&nbsp;
</td><td>
<a href="http://paulbourke.net/dome/3projdome/fisheye.jpg"><img src="http://paulbourke.net/dome/3projdome/fisheyes.jpg" width=250 height=250 border=1></a>
</td></tr></table><p>

<b>Projector frustums</b><br>
<p align="justify">
Green lines show the projector frustum, in this case a 0.8:1 throw projector
with a 4:3 aspect ratio. The yellow curve on the dome is the intersection of the
frustum with the dome, ie: the part of the dome illuminated by a projector.
In order for the dome to be completely covered the
projectors are mounted slightly below and back from the rim of the dome, of course
this longer throw can also be achieved with a mirror. 
</p>
<table width=100%><tr><td>
<a href="http://paulbourke.net/dome/3projdome/proj0.jpg"><img src="http://paulbourke.net/dome/3projdome/proj0s.jpg" width=250 height=188 border=1></a><br>
<smalltext>1 projector and frustum plane</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/proj1.jpg"><img src="http://paulbourke.net/dome/3projdome/proj1s.jpg" width=250 height=188 border=1></a><br>
<smalltext>2 projectors, showing overlap</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/proj2.jpg"><img src="http://paulbourke.net/dome/3projdome/proj2s.jpg" width=250 height=188 border=1></a><br>
<smalltext>3 projectors, top view</smalltext>
</td></tr></table><p>

<table cellpadding=0 cellspacing=0 width=100%><tr><td valign="top">
<b>Edge blended images for each projector</b><p>
<p align="justify">
The following three images are what is projected by each of the three projectors
in order to achieve a total seamless coverage of the dome surface. Each projector
is responsible for a 120 degree wedge of the dome surface, the edge blending is
applied across the edges of each wedge. While not obvious in these images, the
zone at the top of the dome has an edge blend across three images rather than
just two.
</p>
</td><td width=20>
&nbsp;
</td><td>
<img src="http://paulbourke.net/dome/3projdome/edgeblend.jpg" width=350 height=308 border=0>
</td></tr></table><p>
<table width=100%><tr><td>
<a href="http://paulbourke.net/dome/3projdome/image0.jpg"><img src="http://paulbourke.net/dome/3projdome/image0s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 1</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/image1.jpg"><img src="http://paulbourke.net/dome/3projdome/image1s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 2</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/image2.jpg"><img src="http://paulbourke.net/dome/3projdome/image2s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 3</smalltext>
</td></tr></table><p>

<table cellpadding=0 cellspacing=0 width=100%><tr><td valign="top">
<b>OpenGL texture meshes for each projector</b><br>
<p align="justify">
The warping and edge blending is achieved in real time by using a textured mesh
in OpenGL. Similarly an off-line warping can be applied to movie style content that
creates a higher quality antialiased result, at the sacrifice of being able to
readily change the projector alignment and edge blending.
Each node of the mesh is described by a position (x,y), texture
coordinate (u,v), and gamma corrected edge blend factors (r,g,b). The red zones 
is where edge blending factors are unity, the blue regions where they are zero, and
the blending between those.
The fisheye image is applied as a texture to this mesh.
</p>
</td><td width=20>
&nbsp;
</td><td>
<img src="http://paulbourke.net/dome/3projdome/coords.jpg" width=250 height=296 border=0>
</td></tr></table><p>
<table width=100%><tr><td>
<a href="http://paulbourke.net/dome/3projdome/mesh0.jpg"><img src="http://paulbourke.net/dome/3projdome/mesh0s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 1</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/mesh1.jpg"><img src="http://paulbourke.net/dome/3projdome/mesh1s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 2</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/mesh2.jpg"><img src="http://paulbourke.net/dome/3projdome/mesh2s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 3</smalltext>
</td></tr></table><p>

<center>
<img src="http://paulbourke.net/dome/3projdome/blend.jpg" width=500 height=193 border=0>
</center><p>

<b>Result on dome</b><br>
<p align="justify">
While not particularly clear, the following shows the fisheye projected onto the 
dome. A correct undistorted view can only be achieved by actually being in the
dome and standing in the center.
</p>
<table width=100%><tr><td>
<a href="http://paulbourke.net/dome/3projdome/sim0.jpg"><img src="http://paulbourke.net/dome/3projdome/sim0s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 1</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/sim1.jpg"><img src="http://paulbourke.net/dome/3projdome/sim1s.jpg" width=250 height=188 border=1></a><br>
<smalltext>Projector 1 and 2</smalltext>
</td><td>
<a href="http://paulbourke.net/dome/3projdome/sim2.jpg"><img src="http://paulbourke.net/dome/3projdome/sim2s.jpg" width=250 height=188 border=1></a><br>
<smalltext>All projectors</smalltext>
</td></tr></table><p>

<b>Deriving warping mesh</b><p>
<p align="justify">
There are at least two ways of creating the OpenGL warping mesh, one is
to trace rays through a regular grid in the projection plane and determine where
the ray strikes the dome and hence the texture coordinates in the fisheye texture.
Another method, and the one used here, is to form a regular polar grid in fisheye
space and determine the intersection on the projection plane of the vector to the
corresponding position on the dome. Either of these would work but the later
is more convenient when deriving the edge blending. The polar nature of the warping
mesh can be seen in the images above that show the mesh.
</p>
<center>
<img src="http://paulbourke.net/dome/3projdome/frustum.jpg" width=500 height=413 border=0>
</center><p>

</td></tr></table></center>
</body>
</html>
