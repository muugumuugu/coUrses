<html>
<head>
<link rel=StyleSheet href="../../pdbstyle2.css" type="text/css" media=all>
<title>Room projection using spherical mirror</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<table border=0 width=100%><tr><td valign="top" colspan=3>
<h1>Wide field of view projection in a rectangular room</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
July 2005
<p>
</td></tr>

<tr><td valign="top" colspan=3>
<p align="justify">
It is easy to imagine how a single data projector and a spherical mirror can
scatter light through wide angles. This can be used to provide a low cost projection
solution for immersive displays where a wide field of view needs to be projected.
The more expensive traditional solutions employ a fisheye lens or multiple projectors
with their images optionally 
<a href="../../miscellaneous/edgeblend/index.html">edge blended</a> together.
</p>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/diagram1.jpg" width=312 height=300 border=0><br>Top view<p>
</td><td width=10>&nbsp;
</td><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/diagram2.jpg" width=398 height=300 border=0><br>Left view<p>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top" colspan=3>
<b>Lighting simulation</b><br>
</td></tr>

<tr><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/top.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/top_s.jpg" width=405 height=300 border=0></a><br>Top view<p>
</td><td width=10>&nbsp;
</td><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/left.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/left_s.jpg" width=264 height=300 border=0></a><br>Left view<p>
</td></tr>

<tr><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/front.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/front_s.jpg" width=352 height=300 border=0></a><br>Front view<p>
</td><td width=10>&nbsp;
</td><td valign="top">
<p align="justify">
The light spread as shown here is derived by 
<a href="../meshmapper/index.html">simulation software</a>, all physical
attributes of the environment are variables to the software including the 
observer position. Some variables such as the projector/mirror attributes
can be varied in order to decide upon the effective field of view (FOV).
The output of the simulation software is the warping function required for
a particular input image projection.
</p><br>
Example room<br>
Width: 3.0m<br>
Height: 2.5m<br>
Depth: 2.2m<br>
Projector aspect: 4:3<br>
Observer position: yellow sphere<br>
Projecting a regular grid pattern<br>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top" colspan=3>
<b>Notes</b><br>
<ul>
<li><p align="justify">
More or less of the wall surface can be illuminated depending on
the relative distance between the projector and the mirror, also depends
on the throw and zoom of the projector.
</p>
<li><p align="justify">
If wider wall coverage is required instead of ceiling coverage then 
16:9 projectors may be more appropriate.</p>
<li>Final resolution is largely dependent upon projector resolution and therefore
cost. For example: SXGA+ projections are currently about 6 times more expensive than XGA
projectors for less than twice the number of pixels.
</p>
<li><p align="justify">
The images above are intended to show the maximum coverage possible given
the particular configuration, in reality the images would be trimmed in such a
way that the edge of the illuminated area on the walls were straight.....maybe.
</p>
<li><p align="justify">
The warping mesh includes the ability to correct for brightness variation due to different
light path lengths but also due to incident angle on the surface (Gouraud law).
</p>
<li><p align="justify">
A similar arrangement is possible by mounting the projector and mirror on
the ceiling, thus illuminating the floor and the walls.
Equally, the projector mirror could be tilted to illuminate part of the
ceiling and the floor.
</p>
<li><p align="justify">
Of particular interest is the possibility of creating an optimal mirror shape
that would fill the space, rather than using a standard spherical mirror. 
[A future project]
</p>
</ul>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top" colspan=3>
<b>Examples from fisheye projections</b><p>
<p align="justify">
Two examples are shown below, in each case the input image is a 
<a href="../fisheye/index.html">fisheye projection</a>.
The images on the right, when projected using the mirror system would appear
undistorted in the room. For example, the radial lines in the first example (right) would
appear straight. The circular lines are spaced at 7.5 degrees, so on the horizon the 
field of view is about 135 degrees. The view from the midpoint to the floor is
about 34 degrees. It should be stressed that almost any field of view can be
achieved, the price however 
for a wider field of view is resolution and pixel efficiency.
</p>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/radialinput_s.jpg" width=300 height=300 border=1><br>
Original fisheye image<br>
</td><td width=10>&nbsp;
</td><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/radialoutput.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/radialoutput_s.jpg" width=400 height=300 border=1></a><br>
Warped version for projection<p>
</td></tr>

<tr><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/input1_s.jpg" width=300 height=300 border=1><br>
Original fisheye image<br>
<font size=-1>
<a href="http://www.gregdowning.com/">Image courtesy of Greg Downing</a>
</font>
</td><td width=10>&nbsp;
</td><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/output1.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/output1_s.jpg" width=400 height=300 border=1></a><br>
Warped version for projection<p>
</td></tr>

<tr><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/test1.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/test1_s.jpg" width=415 height=300 border=0></a>
</td><td width=10>&nbsp;
</td><td valign="top">
<p align="justify">
Simulation of the warped image into the environment, of course the result
shown here
doesn't look totally seamless across the corners of the room because
this view is not located at the correct viewer position (yellow sphere).
</p>
<p align="justify">
In all wide FOV immersive environments the view is only strictly correct for the
observer in a single position, namely the position the scene is rendered for. For
flat screen displays we don't usually notice the distortion, perhaps because
we are so used to viewing such images. The distortion is very obvious in
stereoscopic environments if the observer can move about without view frustum
correction (normally using some form of head tracking). In a planetarium dome
the distortion is likely to less obvious to the case here because a planetarium
dome doesn't have the sharp discontinuities found in a rectangular room.
</p>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top" colspan=3>
<b>Examples using wide FOV perspective projections</b><p>
</td></tr>

<tr><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/persp1_s.jpg" width=450 height=225 border=1><br>
Perspective image, 135 (horizontal) degree FOV<p>
</td><td width=10>&nbsp;
</td><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/persp2.jpg">
<center>
<img src="http://paulbourke.net/dome/mirrorbox/persp2_s.jpg" width=300 height=225 border=1></a><br>
Warped version for projection<p>
</center>
</td></tr>

<tr><td valign="top">
<img src="http://paulbourke.net/dome/mirrorbox/persp4_s.jpg" width=450 height=225 border=1><br>
Perspective image, 135 degrees FOV<br>
</td><td width=10>&nbsp;
</td><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/persp5.jpg">
<center>
<img src="http://paulbourke.net/dome/mirrorbox/persp5_s.jpg" width=300 height=225 border=1></a><br>
Warped version for projection<p>
</center>
</td></tr>

<tr><td valign="top">
<a href="http://paulbourke.net/dome/mirrorbox/test2.jpg">
<img src="http://paulbourke.net/dome/mirrorbox/test2_s.jpg" width=415 height=300 border=0></a>
</td><td width=10>&nbsp;
</td><td valign="top">
<p align="justify">
Creating a wide field of view perspective projection is likely to be easier for most
existing software, however when this is extended to angles greater than 100 degrees the pixel
efficiency is rather poor.
</p>
<p align="justify">
There are other projections in common usage in immersive environments,
for example 
<a href="../../panorama/cylinder/index.html">cylindrical projections</a> 
and <a href="../cube2fish/index.html">cubic maps</a>. Both of these can
ready be warped using the same principles used above and would be significantly
better than using perspective projections. The author would recommend using
cubic maps, that is, multiple passes where each one captures a 90 degree FOV.
The resulting views (typically 4 from left, right, top, bottom) are each applied
as a textures to a 
<a href="../dometexture/index.html">textured mesh</a>.
</p>
</td></tr>

<tr><td valign="top" colspan=3>&nbsp;</td></tr>

<tr><td valign="top" colspan=3>
<b>Further comments</b><p>
<ul>
<li><p align="justify">
The depth of focus for a particular projector will dictate how well the images
are focused across the variable light path lengths involved.
</p>
<li><p align="justify">
The more of the side walls illuminated, the fewer pixels are used vertically.
</p>
<li><p align="justify">
The wider the FOV the less suitable is a perspective projection as the input
image. Using cubic, cylindrical, or fisheye input reduces the existing software
options.
</p>
<li><p align="justify">
Can the lighting and surface illumination be controlled sufficiently to 
sufficiently "hide" the corners (?)
</p>
<li><p align="justify">
While it isn't terribly difficult to create the appropriate wide angle images
using custom OpenGL code, it is rare to find such support in existing game engines.
The way the warping here is applied requires that the software can render the
scene in two passes, one that creates the wide field of view image (cylindrical,
perspective, fisheye....) and then draw that as a texture on the warping mesh
created by the simulation software discussed above. Warping pre-rendered images
and movies is straightforward.
</p>
</ul>

</td></tr></table>

<b>Projector Rigging<br>
<center>
<a href="http://paulbourke.net/dome/mirrorbox/rigging.jpg"><img src="http://paulbourke.net/dome/mirrorbox/riggings.jpg" width="700" height="525" border=0></a><p>
</center>

<h3>Example 1</h3>
<center><table><tr><td valign="top">
</td><td align="right">
	<img src="http://paulbourke.net/dome/mirrorbox/screen1.jpg" width=400 height=300>
</td></tr><tr><td colspan=2>
	<img src="http://paulbourke.net/dome/mirrorbox/montage1.jpg" width="700" height="549" border=0>
</td></tr></table></center><p>

<h3>Example 2</h3>
<font size=-1>
Image courtesy of Peter Murphy
</font>
<center><table><tr><td valign="top">
</td><td align="right">
<img src="http://paulbourke.net/dome/mirrorbox/screen2.jpg" width=400 height=300>
</td></tr><tr><td colspan=2>
	<img src="http://paulbourke.net/dome/mirrorbox/montage3.jpg" width="700" height="311" border=0>
</td></tr></table></center><p>

<h3>Example 3</h3>
<center><table><tr><td valign="top">
</td><td align="right">
	<img src="http://paulbourke.net/dome/mirrorbox/screen3.jpg" width=400 height=300>
</td></tr><tr><td colspan=2>
	<img src="http://paulbourke.net/dome/mirrorbox/montage2.jpg" width="700" height="426" border=0>
</td></tr></table></center><p>

Simulation<br>
<center><table><tr><td colspan=2>
</td></tr><tr><td>
   <a href="http://paulbourke.net/dome/mirrorbox/room2.jpg"><img src="http://paulbourke.net/dome/mirrorbox/room2s.jpg" width=300 height=300></a>
</td><td align="right">
   <a href="http://paulbourke.net/dome/mirrorbox/room1.jpg"><img src="http://paulbourke.net/dome/mirrorbox/room1s.jpg" width=300 height=300></a>
</td></tr></table></center><p>

Appearance of fisheye image<br>
<center><table><tr><td colspan=2>
</td></tr><tr><td>
   <a href="http://paulbourke.net/dome/mirrorbox/testpat1.jpg"><img src="http://paulbourke.net/dome/mirrorbox/testpat1s.jpg" width=300 height=225></a>
</td><td align="right">
   <a href="http://paulbourke.net/dome/mirrorbox/testpat2.jpg"><img src="http://paulbourke.net/dome/mirrorbox/testpat2s.jpg" width=300 height=225></a>
</td></tr></table></center><p>

<h3>Example 4 - different room</h3>
Please excuse poor stitching.<p>
<center>
   <img src="http://paulbourke.net/dome/mirrorbox/montage4.jpg" width=700 height=525><p>
   <img src="http://paulbourke.net/dome/mirrorbox/montage5.jpg" width=700 height=544>
</center><p>

Notes<p>
<ul>
<li><p align="justify">
The photos here are more blurred than they appear in real life. They were captured
using a long exposure (it's a dark room) without a tripod.
</p>
<li><p align="justify">
Not all straight lines that cross the corners appear straight in the photos, they
do in real life. The photos were taken well away from the correct viewing position
standing directly behind the mirror.
</p>
<li><p align="justify">
Unfortunately the wall on the left has been painted with a low gain silver paint
so it doesn't reflect light very well on an angle.
</p>
<li><p align="justify">
In this arrangement the wall is very long rather than squarish, as such the
focus is poorer on the side walls. In terms of using this for immersion the out
of focus region is in ones peripheral vision so not a problem at all.
</p>
</ul>

<h3>Example 5: Student project in the Netherlands</h3>
Nina Hirschberg, Timo Klok
<p>

<center><img src="http://paulbourke.net/dome/mirrorbox/nina_diagram1.jpg" width=451 height=400></center><p>

<center><table><tr><td>
	<img src="http://paulbourke.net/dome/mirrorbox/nina_image1.jpg" width=350 height=263>
</td><td width=20>
	&nbsp;
</td><td>
	<img src="http://paulbourke.net/dome/mirrorbox/nina_image2.jpg" width=385 height=263>
</td></tr></table>
<p>

<center><a href="http://paulbourke.net/dome/mirrorbox/nina_manual.jpg">
	<img src="http://paulbourke.net/dome/mirrorbox/nina_manual_s.jpg" width=600 height=655></center><p>

</td></tr></table></center>
</body>
</html>

