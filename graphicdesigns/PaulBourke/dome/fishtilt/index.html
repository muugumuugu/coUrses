<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Fisheye tilting</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>



<center><table width=800><tr><td>

<center>
<h1>Tilting fisheye images for<br>variable dome orientations</h1>
<a href="../index.html">Paul Bourke</a><br>
February 2005<p>
See <a href="../cameras/index.html">other applications here</a>
</center>

<p align="justify">
Not all dome environments have the hemisphere surface orientated the same,
for example a VisionStation and a planetarium typically have their hemispheres
at 90 degrees to each other. Many planetariums have seating arranged so that
the center of attention of the audience is 30 or 40 degrees above the
horizon, still other planetarium domes are tilted placing the center of
attention higher above the horizon.
</p>

<center>
<img src="http://paulbourke.net/dome/fishtilt/original.jpg" width=720 height=576 border=1><br>
Single frame from video camera.
</center><p>

<p align="justify">
When creating synthetic fisheyes using computer graphics the different
dome orientations can be catered for by simply rendering the models/animation
again.
However for filmed fisheye material it isn't always possible to repeat
the filming, for example it may be of a remote location or a recording of 
a once only event. This document describes how one might create fisheye
images at different angles to the angle the original fisheye was captured
at. 
</p>

<center>
<img src="http://paulbourke.net/dome/fishtilt/fisheye.jpg" width=600 height=600 border=1><br>
Corrected fisheye, 0 degree tilt angle.
</center><p>

<center>
<img src="http://paulbourke.net/dome/fishtilt/30deg_tilt.jpg" width=600 height=600 border=1><br>
Tilted 30 degrees.
</center><p>

<p align="justify">
The example shown here converts a movie that was captured with the fisheye
pointed "forwards", suitable for an environment such as the  VisionStation. 
The new intended viewing dome was a small inflatable where the center of
attention is perhaps half way between the horizon and the pole. The image
above shows the new fisheye as if it was tilted 30 degrees, and below
a 60 degree tilt.
</p>

<center>
<img src="http://paulbourke.net/dome/fishtilt/60deg_tilt.jpg" width=600 height=600 border=1><br>
Tilted 60 degrees.
</center><p>

<p align="justify">
Note that these are obviously no longer full fisheye images because there
is information that simply isn't captured in the new fisheye orientation.
This is somewhat helped if the projection system employs the common
truncated fisheye image/lens arrangement which crops parts of the
fisheye anyway, in this case it is just cropping unavailable portions.
</p>

<center>
<img src="http://paulbourke.net/dome/fishtilt/60deg_trunc.jpg" width=600 height=450 border=1><br>
Tilted by 60 degrees and cropped for truncated fisheye projection.
</center><p>

<b>Application</b><br>
<p align="justify">
An application called "fishtilt" implements the fisheye rotation
described here. It is designed to work on a single image but obviously
can be applied to each frame of an animation. Antialiasing is
implemented as a straightforward supersampling of 2x2, 3x3, etc. The
performance is dictated by the dimensions of the output image and
the level of antialiasing, it is independent of the size of
the input image.
</p>

<pre>
Usage: fishtilt [options] fisheyeimage
Options
   -w n     output image width, default = 600
  -af n     field of view of fisheye (degrees), default = 180
  -cf x y   center of the fisheye image, default is image center
   -r n n   horizontal and vertical radius of fisheye
  -tx n     tilt by n degrees about right vector, default = 0
  -tz n     tilt by n degrees about up vector, default = 0
   -a n     antialiasing level, default = 1 (no antialising)
   -b n     reduce field of view towards back - eperimental, units: degrees
  -bb       clip top of fisheye for truncated fisheye
</pre>

<b>Geometric conventions</b><p>
<center>
<img src="http://paulbourke.net/dome/fishtilt/equations.gif" width=594 height=593 border=0>
</center>

<br><br><br>

<center>
<h1>Rotating a fisheye image left/right</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
December 2008
</center>

<p align="justify">
Similarly a fisheye can be "panned" (rotated) left and right.
</p>

<center>
   <img src="http://paulbourke.net/dome/fishtilt/diagram.jpg" width=536 height=905 border=0>
</center>
<p>

<center>
<table cellpadding=10>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/00.jpg" width=400 height=400 border=1><br>
   0 degrees, original image
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/10.jpg" width=400 height=400 border=1><br>
   10 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/20.jpg" width=400 height=400 border=1><br>
   20 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/30.jpg" width=400 height=400 border=1><br>
   30 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/40.jpg" width=400 height=400 border=1><br>
   40 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/50.jpg" width=400 height=400 border=1><br>
   50 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/60.jpg" width=400 height=400 border=1><br>
   60 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/70.jpg" width=400 height=400 border=1><br>
   70 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/80.jpg" width=400 height=400 border=1><br>
   80 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/90.jpg" width=400 height=400 border=1><br>
   90 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/100.jpg" width=400 height=400 border=1><br>
   100 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/110.jpg" width=400 height=400 border=1><br>
   110 degrees
</td></tr>
<tr><td>
   <img src="http://paulbourke.net/dome/fishtilt/120.jpg" width=400 height=400 border=1><br>
   120 degrees
</td><td>
   <img src="http://paulbourke.net/dome/fishtilt/130.jpg" width=400 height=400 border=1><br>
   130 degrees
</td></tr>
</table>
</center>

<pre>
Usage: fishrotate [options] fisheyeimage
Options
   -w n     output image width, default = 600
  -cf x y   center of the fisheye image, default is image center
   -r n n   horizontal and vertical radius of fisheye
   -t n     rotate by n degrees about right vector, default = 0
   -a n     antialiasing level, default = 1 (no antialising)
  -bb       clip top of fisheye for truncated fisheye
</pre>

<p align="justify">
A further example with the Red Scarlet camera and Sigam 4.5mm fisheye lens.
The tilting is designed for the iDome in which case the loss of image at the bottom
is not a problem although there are also thin wedges introduced on the sides.
</p>
<center>
<a href="http://paulbourke.net/dome/fishtilt/tilting.png">
<img src="http://paulbourke.net/dome/fishtilt/tilting_s.png" width=500 height=700 border=1></a>
</center>

</td></tr></table></center>
</body>
</html>

