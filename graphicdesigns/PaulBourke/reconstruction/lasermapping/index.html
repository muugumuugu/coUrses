<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Plans and elevations from Laser Scans</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Plans and elevations from Laser Scans</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
July 2019
</center>
<p><br><p>

<p align="justify">
The following is a short note on creating plans and elevations from point clouds,
typically from laser scans. The application in this case was creating images that
would form the basis of human tracing in a CAD package, possibly assisted by 
an automatic line detection algorithm.
</p>

<p align="justify">
The example data set here is relatively small, consisting of only 1/4 billion points.
The multiple laser stations have been registered in advance of the processing performed
here. The data is supplied in the simplest of text only formats, namely the
<a href="../../dataformats/ptx/index.html">PTX format</a>. It contains position, estimated
colour and return strength of each laser scan return. 
The following 3D preview of the points shows every 1/20 point.
</p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/points.png"><img src="http://paulbourke.net/reconstruction/lasermapping/points_s.png" width=800 height=600 border=1></a>
</center><p>

<p align="justify">
The key to an effective image representation is not to form a discrete sampling on the image plane
but rather a 2D histogram of point density. That is, as points are projected into
the desired plane they accumulate, this histogram is then mapped to a greyscale image.
Objects in the scanned scene essentially get weighted by their importance perpendicular to
the plane they are mapped onto.
</p>
<p align="justify">
In the following all the points are mapped onto the x-y plane.
The blue lines are automatic detection of strong line structure.
</p>
<center>
	<a href="http://paulbourke.net/reconstruction/lasermapping/xy.png"><img src="http://paulbourke.net/reconstruction/lasermapping/xy_s.png" width=600 height=800 border=1></a>
</center><p>

<p align="justify">
The laser scan data is of course in real world units, these are mapped onto a known
image coordinate system by specifying the size of each pixel. In all the examples here
1 pixel corresponds to 5mm. In general there will be a desirable range of pixel sizes,
too small and the laser scan points will overlap less and the resulting image will
be low dynamic range, too large and the resulting image will be a low resolution
representation of the laser scan data.
</p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/yz.png"><img src="http://paulbourke.net/reconstruction/lasermapping/yz_s.png" width=800 height=600 border=1></a>
</center><p>

<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/xz.png"><img src="http://paulbourke.net/reconstruction/lasermapping/xz_s.png" width=600 height=644 border=1></a>
</center><p>

<p align="justify">
Instead of collapsing the entire height range, one can filter by a range of heights
to get individual floor plans.
The following is an example of height from 1.5m to 2.5m.
</p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/plan1.png"><img src="http://paulbourke.net/reconstruction/lasermapping/plan1_s.png" width=600 height=800 border=1></a>
</center><p>
<p align="justify">
The following is from 0 to 1m so excludes floors but includes some furniture.
</p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/plan2.png"><img src="http://paulbourke.net/reconstruction/lasermapping/plan2_s.png" width=600 height=800 border=1></a>
</center><p>

<p align="justify">
The histogram density can be used to form a colour map that further highlights the
walls (tend to be denser) over the furniture and other features that occupy less of
the height range.
<p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/plan1c.png"><img src="http://paulbourke.net/reconstruction/lasermapping/plan1c_s.png" width=600 height=800 border=1></a>
</center><p>
<p align="justify">
Isometric view with histogram density colour mapping.
</p>
<center>
   <a href="http://paulbourke.net/reconstruction/lasermapping/xyz.png"><img src="http://paulbourke.net/reconstruction/lasermapping/xyz_s.png" width=800 height=600 border=1></a>
</center><p>

</td></tr></table></center><p><br><p>
</body>
</html>

