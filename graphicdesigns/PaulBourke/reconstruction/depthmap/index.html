<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Creating 3D engravings by manually painting depth maps</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Creating 3D engravings by manually painting depth maps</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
December 2019
</center>
<p><br><p>

<p align="justify">
In the following an example is presented whereby a 3D model is created by
manually painting a depth map. Obviously this only works for simple one-to-one
surfaces, such as the engraving used in this example (an engraving of a ship
at Borobudur). 
There are many reasons why one might want to do this, in this case a sense of the
3D surface was required and the cost of flying someone to the site for a true
3D reconstruction (photogrammetric) was too costly.
</p>

<center>
	<a href="http://paulbourke.net/reconstruction/depthmap/borobudur.jpg">
	<img src="http://paulbourke.net/reconstruction/depthmap/borobudur_s.jpg" width=800 height=530 border=1></a><br>
	<smalltext>Original photograph</smalltext>
</center><p>

<p align="justify">
The process is illustrated in the next two figures. One draws outlines of the raised features
on a single photograph of the engraving, best if it is a front on photograph. In this case
these outlines are smooth curves drawn in a simple 2D drawing package. In the following
it can be noticed that not all height features have been traced, this is simply a matter
of the time and patience required. This test exercise did not warrant that effort.
</p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/tracing.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/tracing_s.jpg" width=800 height=540 border=1></a><br>
   <smalltext>Region tracing as a transparent layer on original photograph</smalltext>
</center><p>

<p align="justify">
These shapes are filled with a grey level depending on the relative height of the region, a linear
grey scale is used by choosing actual values between 0 to 255, rather than visually.
</p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/boundaries.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/boundaries_s.jpg" width=800 height=530 border=1></a><br>
   <smalltext>Traced boundaries</smalltext>
</center><p>

<p align="justify">
The following is the final depth map, the edges on the above are removed and the
result has a Gaussian blur applied to avoid what would otherwise be sharp edges.
</p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/depthmap.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/depthmap_s.jpg" width=800 height=530 border=1></a><br>
   <smalltext>Final depth map</smalltext>
</center><p>

<p align="justify">
It is this grey scale image that is converted into a mesh where the height of the
mesh is proportional to the grey value and the texture coordinates simply range from
0 to 1 on each axis. This allows the original traced image to be applied as the
texture to the mesh.
While a simple regular 2D mesh could be formed, in this case a curvature sensitive
mesh is created, largely an efficiency measure as large flat surfaces don't require
lots of triangles.
</p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/wireframe.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/wireframe_s.jpg" width=800 height=538 border=1></a><br>
   <smalltext>Wire frame version illustrating curvature aware mesh generation</smalltext>
</center><p>

<p align="justify">
The following are two views of the resulting 3D mesh.
This mesh can be used for stereoscopic viewing, relighting and so on.
</p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/3d2.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/3d2_s.jpg" width=800 height=780 border=1></a><br>
   <smalltext>View of 3D mesh</smalltext>
</center><p>

<center>
   <a href="http://paulbourke.net/reconstruction/depthmap/3d1.jpg">
   <img src="http://paulbourke.net/reconstruction/depthmap/3d1_s.jpg" width=800 height=376 border=1></a><br>
   <smalltext>View of 3D mesh</smalltext>
</center><p>

</td></tr></table></center>
<br><br><p>
</body>
</html>

