<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Typical pipeline for 360 video processing</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Typical pipeline for 360 video processing</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
July 2018
</center>
<p><br><p>

<p align="justify">
The following outlines the steps that invariably are involved in the processing
of 360 video footage from multi-camera systems. Many of these steps are transparent
today, being performed within integrated packages.
</p>

<p><br><p>
<b>1. Start of the process is one image frame per camera</b><p>
<center>
<a href="http://paulbourke.net/panorama/360pipeline/allcameras.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/allcameras_s.jpg" width=800 height=640 border=1></a>
</center>


<p><br><p>
<b>2. Image correction</b><p>
<p align="justify">
Lens correction, pincushion/barrel correction for rectilinear lenses, fisheye 
linearisation for fisheye lenses. After this stage one has an idealised 
mathematical camera, pinhole for rectilinear or 
<a href="../../dome/fisheyecorrect/index.html">true-theta for fisheye</a>.
</p>
<center>
<a href="http://paulbourke.net/panorama/360pipeline/rectifiedcameras.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/rectifiedcameras_s.jpg" width=800 height=640 border=1></a>
</center>


<p><br><p>
<b>3. Warp and blend</b><p>
<p align="justify">
Warp and blend of images into equirectangular. Could be a geometric algorithm 
(eg: LadyBug), feature point (eg: PTGui and most GoPro rigs) and/or optical flow (MistakaVR).
</p>
<a href="http://paulbourke.net/panorama/360pipeline/equirectangular.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/equirectangular_s.jpg" width=800 height=400 border=1></a>
</center>


<p><br><p>
<b>4. Colour and exposure equalisation between cameras.</b><p>


<p><br><p>
<b>5. Colour adjustment and editing.</b><p>
<a href="http://paulbourke.net/panorama/360pipeline/equirectangular_colour.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/equirectangular_colour_s.jpg" width=800 height=400 border=1></a>
</center>


<p><br><p>
<b>6. Storage/backup for archive.</b><p>
<p align="justify">
Most common choice is an equirectangular projection, some people prefer cube maps.
</p>

<p><br><p>
<b>7. Optional conversion </b><p>
<p align="justify">
Optional conversion of equirectangular to a format more suited 
for final viewing. For example, for a cylindrical display it is necessary to 
convert to a cylindrical panorama of a matching vertical FOV? 
In theory this conversion can be performed in realtime by the playback software
but it is often more efficient to perform as a separate process for displays
that use a fraction of the equirectangular realestate.
</p>
<a href="http://paulbourke.net/panorama/360pipeline/cylindricalpano.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/cylindricalpano_s.jpg" width=800 height=105 border=1></a><br>
<smalltext>Mapping to cylindrical panorama for a cylindrical display</smalltext>
</center><p>
<a href="http://paulbourke.net/panorama/360pipeline/fisheye.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/fisheye_s.jpg" width=800 height=800 border=1></a><br>
<smalltext>Mapping to fisheye for a planetarium</smalltext>
</center><p>


<p><br><p>
<b>8. Creation of final viewed images</b><p>
<p align="justify">
This would normally be performed during playback since it generally involves
display specific operations, such as warping and blending.
<p>
<p align="justify">
For example<bR>
- Stereo pair(s) for one or more flat wall displays (eg: CAVE).<br>
- Wide angle stereo pair for HMD.<br>
- Fisheye selection for iDome.<br>
- Sections of the panorama for a cylindrical display. 
The below is a mockup for 6 projectors showing warping and blending, for
a 6 projector cylindrical display.
</p>
<a href="http://paulbourke.net/panorama/360pipeline/projectors.jpg">
<img src="http://paulbourke.net/panorama/360pipeline/projectors_s.jpg" width=800 height=310 border=1></a>
</center>


</td></tr></table></center><p>
</body>
</html>

