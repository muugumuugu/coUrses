<html>
<head>
<link rel=StyleSheet href="../../pdbstyle2.css" type="text/css" media=all>
<title>Cylindrical projection</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width="800"><tr><td>

<center><table width=100% cellpadding=0 cellspacing=0 border=0>
<tr><td align="left">
<center>
<h1>Image warping for projection onto a cylinder</h1>
<h3> (Including stereoscopic)</h3>
Written by <a href="../index.html">Paul Bourke</a><br>
December 2004
</center>
<p><br><p>
</tr></td>

<tr><td>
<b>Introduction</b>
<p align="justify">
In general, given a cylindrical surface and an arbitrary projector position
and orientation angle, the projected image as it appears on the cylindrical surface
will look distorted, see figure 1 and 2. In addition there may be parts of the
image plane that do not lie on the cylindrical surface (shown in grey below) and
it may be necessary to tile the images and therefore 
<a href="../../miscellaneous/edgeblend/index.html">edge blend</a> between adjacent
images (shown in blue below).
</p>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure1.gif" width=732 height=647 border=0></center><br>
Figure 1: Projecting standard mesh (View 1).<br>
Blue is edge blend region.<br>
Grey is outside the screen area.<br>
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure2.gif" width=620 height=651 border=0></center><br>
Figure 2: Projecting standard mesh (View 2).
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<p align="justify">
It is possible to warp the projected image so that the image as it appears
on the cylindrical surface looks undistorted to an observer at the center
of the cylinder. Figure 3 and 4 show a warped grid and the correct result
on the cylindrical surface. With current graphics hardware this warping can be
performed in real time, in this case the input to the warping stage is a 
cylindrical panoramic image. The exact warping function can be calculated by
simulating the physical system and tracing rays from the projector, taking
into account the lens, and finding where that ray hits the cylindrical surface.
Given that information, the coordinates of the panoramic image that should be
at that point on the cylinder can be calculated. While the warping for some 
projector/lens/screen arrangements can be calculated analytically, this 
simulation approach is most appropriate for dealing with arbitrary arrangements.
</p>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure3.gif" width=713 height=639 border=0></center><br>
Figure 3: Projecting corrected mesh (View 1).
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure4.gif" width=631 height=661 border=0></center><br>
Figure 4: Projecting corrected mesh (View 2).
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<b>Example</b>
<p align="justify">
The following is an example using a rendered panoramic from a computer model
of the Royal Exhibition Building in Melbourne, Australia. In figure 6 the
warped image can be seen on the projection plane and figure 5 shows the 
undistorted image as it would appear on the cylindrical surface. In this
environment the full cylinder will be illuminated with 4 projectors, each
edge blended for a continuous cylindrical panoramic image.
</p>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure5.jpg" width=587 height=612 border=0></center><br>
Figure 5: Projecting corrected mesh (View 2).<br>
Royal Exhibition Building, Melbourne.
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<center>
<img src="http://paulbourke.net/panorama/cylinder/figure6.jpg" width=678 height=700 border=0></center><br>
Figure 6: Projecting corrected mesh (View 2).<br>
Royal Exhibition Building, Melbourne.
</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<b>Screen dumps from single computer, a stereoscopic pair</b><p>
<center>
<img src="http://paulbourke.net/panorama/cylinder/mesh.jpg" width=700 height=263 border=1><br>
<smalltext>Warping mesh and texture coordinates</smalltext>
</center><p>

<center>
<img src="http://paulbourke.net/panorama/cylinder/image.jpg" width=700 height=263 border=1><br>
<smalltext>Stereo pairs (left and right eye) mapped onto textured mesh</smalltext>
</center><p>

<center>
<img src="http://paulbourke.net/panorama/cylinder/blendzone.jpg" width=700 height=263 border=1><br>
<smalltext>Edge blend zones</smalltext>
</center><p>

<center>
<img src="http://paulbourke.net/panorama/cylinder/blend.jpg" width=700 height=263 border=1><br>
<smalltext>Gamma corrected edge blend</smalltext>
</center><p>

<center>
<img src="http://paulbourke.net/panorama/cylinder/final.jpg" width=700 height=263 border=1><br>
<smalltext>Final image with edge blend zones</smalltext>
</center><p>

</td></tr>

<tr><td><br><br></td></tr>

<tr><td>
<b>Example: 360 degree stereoscopic display</b><p>

<center>
<a href="http://paulbourke.net/panorama/cylinder/reb.jpg"><img src="http://paulbourke.net/panorama/cylinder/reb_s.jpg" border=1 width=500 height=375></a>
</center><p>
<p align="justify">
The following is one of 4 computers, each computer presents the left and right
eye, edge blended pair.
</p>

<center>
<a href="http://paulbourke.net/panorama/cylinder/computer.jpg"
><img src="http://paulbourke.net/panorama/cylinder/computer_s.jpg" border=1 width=500 height=375></a>
</center>
<p align="justify">
Each display is connected to a single projector,
stereo is achieved using passive polaroid filters on the projectors that
match the filters in the polaroid glasses.
</p>
<center><img width=500 height=500 border=1 src="http://paulbourke.net/panorama/cylinder/projectors.jpg"></a></center>
<p>

<p align="justify">
In total, 4 projectors for 360 degree coverage, 2 projectors per eye.....8
projectors in total.
</p>
<center>
<img border=1 src="http://paulbourke.net/panorama/cylinder/all.jpg" width=620 height=620>
</center>

</td></tr>

<tr><td><br><br></td></tr>

</table></center>

</td></tr></table></center>
</body>
</html>

