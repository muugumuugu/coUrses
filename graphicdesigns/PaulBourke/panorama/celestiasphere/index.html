<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Creating equirectangular projections using Celestia</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Creating equirectangular projections using Celestia</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
March 2020<p>
See also: <a href="../stellariumsphere/index.html">Create equirectangular projections using Stellarium</a><br>
See also: <a href="../googlesphere/index.html">Create equirectangular projections using GoogleEarth</a>
</center>
<p>

<p align="justify">
The following documents how one might create equirectangular projections from Celestia.
Why might one want to do this? Equirectangular projections are a convenient image format
for presenting 360x180 data online or through head mounted displays. It is one of a few formats
that records everything visible from a point in space. The other major format are cube maps,
in the following the cube maps are created and the equirectangular derived from those.
</p>

<p align="justify">
The document here: <a href="../stellariumsphere/index.html">Create equirectangular projections using Stellarium
</a> achieved the result by rendering two fisheyes in order to capture the whole 360x180 view.
Celestia does not have a fisheye rendering mode so the "standard" alternative is to render the
6 faces of a cube, each a 90 degree by 90 degree field of view. These 6 cubemap faces can be
used directly in many viewing softwares or they can be remapped to an equirectangular.
</p>

<p align="justify">
The 6 cube maps are automatically generated with a .cel script, specifically it orientates
the camera along each of the positive and negative axes. Unfortunately it does not seem possible to
automatically do a window or screen capture so this needs to be performed manually.
Celestia also does not provide a means to set an exact window size, normally one would want
a square window to ensure both the horizontal and vertical field of view are the same, namely 90
degrees. The way around this is made possible given that the FOV one can specify in the .cel script
is the vertical FOV. So, as long as the window is wider than the width then one can crop it
horizontally to give a square image with 90x90 degree FOV. One way to get the higher resolution
is to run Celestia in full screen mode, run the .cel script with delays at each camera orientation
and do a screen grab at each orientation. A simple script can trim and rotate the images to
conform to any desired cubemap convention.
Example of cube map images images are presented below.
</p>

<center><table><tr><td>
	&nbsp;
<td><td>
	<a href="http://paulbourke.net/panorama/celestiasphere/celestia1_t.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_ts.jpg" width=200 height=200 border=1></a>
</td><td>
   &nbsp;
</td><td>
   &nbsp;
</td></tr><tr><td>
   <a href="http://paulbourke.net/panorama/celestiasphere/celestia1_l.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_ls.jpg" width=200 height=200 border=1></a>
<td><td>
   <a href="http://paulbourke.net/panorama/celestiasphere/celestia1_f.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_fs.jpg" width=200 height=200 border=1></a>
</td><td>
   <a href="http://paulbourke.net/panorama/celestiasphere/celestia1_r.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_rs.jpg" width=200 height=200 border=1></a>
</td><td>
   <a href="http://paulbourke.net/panorama/celestiasphere/celestia1_b.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_bs.jpg" width=200 height=200 border=1></a>
</td></tr><tr><td>
   &nbsp;
<td><td>
   <a href="http://paulbourke.net/panorama/celestiasphere/celestia1_d.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1_ds.jpg" width=200 height=200 border=1></a>
</td><td>
   &nbsp;
</td><td>
   &nbsp;
</td></tr></table></center><p>
<center>
<a href="http://paulbourke.net/panorama/celestiasphere/celestia1.html">Interactive viewer of the above 6 cube maps</a>
</center>

<p align="justify">
The corresponding equirectangular is as follows.
</p>

<center>
	<a href="http://paulbourke.net/panorama/celestiasphere/celestia1.jpg"><img src="http://paulbourke.net/panorama/celestiasphere/celestia1s.jpg" width=800 height=400 border=1></a>
</center><p>


<p align="justify">
Notes
</p>

<ul>
<li>In Celestia hide frame rate, console (~), and info display (V).<p>
<li>Enter full screen, or at the very least the window width must be greater than the height.<p>
<li>In Celestia make sure antialiasing is on (control-x)<p>
<li>On the Mac a screen grab is performed by command-shift-3 but there are
lots of alternatives.
Order for the <a href="http://paulbourke.net/panorama/celestiasphere/cubemaps.cel">.cel script developed</a>
is front, right, back, left, top, down.<p>
</ul><p>

<p align="justify">
</p>

</td></tr></table></center>
</body>
</html>

