<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>Approaches to Modelling the Surface of the Human Cortex</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Case study: Visualisation Earth Mantle Core data</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
Jan 2011
</center>
<p><br><p>

<p align="justify">
The following presents some of the initial outcomes from
a project to visualise Earth mantle data.
The approach taken, the data sources and manipulation required will be
discussed with the view to assisting others undertaking similar projects
and to give an idea of the processes involved that are common across
many visualisation exercises.
</p>

<b>Mantle data</b><p>

<p align="justify">
The Earth Mantle data is sourced from EAPS (Earth, Atmospheric, and Planetary Sciences).
The file is a plain text file with 4 columns, namely latitude, longitude, depth,
and scalar value (dVp). For example the first few lines are as follows:
</p>

<center><table><tr><td>
<pre>
   Lat   Long  Depth    dVp
-89.65   0.35   22.6   1.46
-88.95   0.35   22.6   1.39
-88.24   0.35   22.6   1.31
-87.54   0.35   22.6   1.23
-86.84   0.35   22.6   1.20
-86.13   0.35   22.6   1.21
-85.43   0.35   22.6   1.22
-84.73   0.35   22.6   1.23
-84.02   0.35   22.6   1.24
-83.32   0.35   22.6   1.25
-82.62   0.35   22.6   1.26
-81.91   0.35   22.6   1.26
-81.21   0.35   22.6   1.28
-80.51   0.35   22.6   1.30
-79.80   0.35   22.6   1.32
-79.10   0.35   22.6   1.34
-78.40   0.35   22.6   1.37
-77.70   0.35   22.6   1.39
 :
 :
 :
</pre>
</td></tr></table></center><p>

<p align="justify">
While this is essentially point data it does have a precise organisation.
The data is structured in an onion peel like arrangement, data spheres of different
radius. In total there are 64 different spheres ranging in depth range from 22.6km to
2868.9km (Earth radius is taken to be on average 6371km, global variation is not
considered here). Each sphere is defined by 512 samples in longitude and 256 samples
in latitude. Four of these spheres are shown below and the scalar value mapped to
a hot-cold colour map (Note these are not all from the same view point).
</p>

<center>
<table><tr><td align="center" valign="bottom">
	<img src="http://paulbourke.net/miscellaneous/earth/00.png" width=350 height=350 border=0><br>
	Spherical slice 1, radius = 6348km.
</td><td align="center" valign="bottom">
   <img src="http://paulbourke.net/miscellaneous/earth/24.png" width=290 height=290 border=0><br>
   Spherical slice 24, radius = 5264km.
</td></tr><tr><td align="center" valign="bottom">
   <img src="http://paulbourke.net/miscellaneous/earth/48.png" width=230 height=230 border=0><br>
   Spherical slice 48, radius = 4180km.
</td><td align="center" valign="bottom">
   <img src="http://paulbourke.net/miscellaneous/earth/63.png" width=190 height=190 border=0><br>
   Spherical slice 64, radius = 3502km.
</td></tr></table>
</center><p>

<b>Vector coastline data</b><p>

<p align="justify">
In order to provide a reference to familiar structures, a coastline dataset
is optionally overlaid on the volumetric data. The particular data used is from NGDC
(National Geophysical Data Centre), the main reason for using this particular
source was that the data is provided in an easy to parse ASCII file. The exact
data is referred to as WCL (World Coast Line),
the first few lines from the 1:5,000,000 dataset is as follows:
</p>

<center><table><tr><td>
<pre>
&gt;
 0.192440 5.669954
-0.114995 5.515063
-0.391921 5.360171
-0.657114 5.195893
-0.887104 5.151303
-1.262597 5.062123
-1.417488 5.008146
-1.560645 4.874377
-1.736658 4.775809
&gt;
-2.771612 4.951822
-2.860792 4.963556
-3.003949 4.97529
-3.301997 5.052736
-3.611779 5.106713
-3.832382 5.184159
-4.238384 5.163037
 :
 :
 :
</pre>
</td></tr></table></center><p>

<p align="justify">
These are just polylines, the start of each is indicated by a "&gt;" symbol,
and the vertices are given in longitude and latitude. This is relatively
straightforward to parse and output line segments in other formats, for
example the format required by the volume visualisation software used.
Note that for some reason long curve sections are often broken up into
shorter pieces. The translator detects these and combines them, this assists
with the subsampling in order to present a smaller more efficient series
of coastal outlines to the rendering software.
</p>

<center>
	<img src="http://paulbourke.net/miscellaneous/earth/wcl.png" width=400 height=400 border=0>
</center><p>

<b>Volume rendering</b><p>

<p align="justify">
The intended means of visualising this data was though volume rendering. The software
used is Drishti developed at the ANU (Australia National University). The point sample
data provided for the mantle needs to be converted into a volumetric dataset. The approach
taken here is to consider each voxel in the volume and determine its value as a weighted
average (Gaussian weights) of the points in the neighbourhood. Stepping though each voxel
and then considering each point in the mantle data (512*256*64 = 8388608 points) is clearly
inefficient. Rather each point is considered in turn, 
its position in the volume coordinate system
is determined, and then its contribution to voxels in that vicinity is calculated. Gaussian
weighting is used and contributions are only made to voxels +- 3 standard deviations 
(user selectable parameter)
away from the central voxel. The sum of the weights is also recorded and used at the end
of the process to normalise the value at each voxel.
</p>

<center><table width=400><tr><td>
<center>
   <img src="http://paulbourke.net/miscellaneous/earth/radius.png" width=400 height=334 border=0><br>
	<p align="justify">
	P<sub>n</sub> is the point in voxel space of the n'th mantle data
	point. Voxels within 3 standard deviations are contributed to by this point
	weighted by a Gaussian distribution.
	</p>
</center><p>
</td></tr></table></center><p>

<p align="justify">
For this to be successful there is a balancing act between the resolution of the volume
and the chosen standard deviation. One needs to ensure that each voxel is at least being
contributed to and at the same time it is desirable if voxels are not being contributed to
by too many points. 
</p>

<center><table><tr><td>
	<a href="http://paulbourke.net/miscellaneous/earth/snap4.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap4s.jpg" width=400 height=400 border=1></a>
</td><td width=10>
	&nbsp;
</td><td>
   <a href="http://paulbourke.net/miscellaneous/earth/snap1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap1s.jpg" width=400 height=400 border=1></a>
</td></tr></table></center><p>

<center><table><tr><td>
   <a href="http://paulbourke.net/miscellaneous/earth/snap5.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap5s.jpg" width=400 height=400 border=1></a>
</td><td width=10>
   &nbsp;
</td><td>
   <a href="http://paulbourke.net/miscellaneous/earth/snap6.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap6s.jpg" width=400 height=400 border=1></a>
</td></tr></table></center><p>

<center><table><tr><td>
   <a href="http://paulbourke.net/miscellaneous/earth/snap3.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap3s.jpg" width=400 height=400 border=1></a>
</td><td width=10>
   &nbsp;
</td><td>
   <a href="http://paulbourke.net/miscellaneous/earth/snap7.jpg"><img src="http://paulbourke.net/miscellaneous/earth/snap7s.jpg" width=400 height=400 border=1></a>
</td></tr></table></center><p>

<p align="justify">
Inevitably there are aliasing and moire  artefacts arising from a sphere being 
sampled by a square Cartesian grid. Examples of this are quite clear from the image
on the last and left hand cell above. These are only reduced by increasingly higher
resolution volumes.
</p>

<p><br><p>

<center>
<h1>Oceans of the Earth</h1>
Written by <a href="../index.html">Paul Bourke</a>, idea inspired by Peter Morse.<br>
February 2009<p>
<a href="http://paulbourke.net/miscellaneous/earth/oceans_QTVR.mov">QuickTime VR model</a>
</center><p><br><p>

<p align="justify">
We are used to seeing the Earth from space, as maps, 3D renderings, or actual
photographs. We instantly recognise the landforms, those are the areas of the
Earth we occupy. But what does the Earth look like if we switch our attention
to the oceans? For a being living in the oceans this is the view they would
concentrate on and the land would be the unchartered and unexplored areas.
</p>

<p align="justify">
In the following the land has been removed from the planet leaving just the
ocean body. The data used here is derived from the GEBCO dataset, the elevation
of the whole planet (including ocean bottom) at 1 minute (1/60 degree)
resolution. The first image below is the Earth in the typical spherical
projection, as viewed from the inside looking out.
</p>

<center>
<a href="http://paulbourke.net/miscellaneous/earth/spherical1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/spherical1s.jpg" width=800 height=400 border=1></a><br>
<font size=-1>Click for 4K wide version</font>
</center><p>

<p align="justify">
Views from space, ocean depth exaggerated by a factor of 25.
Colour shading by depth, blue being shallow water and red the deepest.
This QuickTime movie (<a href="http://paulbourke.net/miscellaneous/earth/ocean_spin_512.mov">ocean_spin_512.mov</a>) 
is perhaps clearer than the still images.
</p>

<center><table width=100%><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/blue1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/blue1s.jpg" width=400 height=400 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/blue2.jpg"><img src="http://paulbourke.net/miscellaneous/earth/blue2s.jpg" width=400 height=400 border=1></a>
</center>
</td></tr><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/blue3.jpg"><img src="http://paulbourke.net/miscellaneous/earth/blue3s.jpg" width=400 height=400 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/blue4.jpg"><img src="http://paulbourke.net/miscellaneous/earth/blue4s.jpg" width=400 height=400 border=1></a>
</center>
</td></tr></table></center><p>

<p align="justify">
Views from within the Earths crust.
</p>

<center><table width=100%><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/inside1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/inside1s.jpg" width=400 height=400 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/inside2.jpg"><img src="http://paulbourke.net/miscellaneous/earth/inside2s.jpg" width=400 height=400 border=1></a>
</center>
</td></tr><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/inside3.jpg"><img src="http://paulbourke.net/miscellaneous/earth/inside3s.jpg" width=400 height=400 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/inside4.jpg"><img src="http://paulbourke.net/miscellaneous/earth/inside4s.jpg" width=400 height=400 border=1></a>
</center>
</td></tr></table></center><p>

<center>
<a href="http://paulbourke.net/miscellaneous/earth/spherical2.jpg"><img src="http://paulbourke.net/miscellaneous/earth/spherical2s.jpg" width=800 height=400 border=1></a><br>
</center><p>

<p align="justify">
In the iDome.
</p>
<center><table width=100%><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/idome1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/idome1s.jpg" width=400 height=300 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/idome2.jpg"><img src="http://paulbourke.net/miscellaneous/earth/idome2s.jpg" width=400 height=300 border=1></a>
</center>
</td></tr></table></center><p>

<p align="justify">
Rapid prototype using Z-Corp colour printer.
</p>
<center><table width=100%><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/rp1.jpg"><img src="http://paulbourke.net/miscellaneous/earth/rp1s.jpg" width=400 height=300 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/rp2.jpg"><img src="http://paulbourke.net/miscellaneous/earth/rp2s.jpg" width=400 height=300 border=1></a>
</center>
</td></tr></table></center><p>
<center><table width=100%><tr><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/rp3.jpg"><img src="http://paulbourke.net/miscellaneous/earth/rp3s.jpg" width=400 height=300 border=1></a>
</center>
</td><td>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/rp4.jpg"><img src="http://paulbourke.net/miscellaneous/earth/rp4s.jpg" width=400 height=300 border=1></a>
</center>
</td></tr></table></center><p>

Objet 3D printer</p>
<center>
<a href="http://paulbourke.net/miscellaneous/earth/oceans.jpg"><img src="http://paulbourke.net/miscellaneous/earth/oceans_s.jpg" width=800 height=410 border=1></a>
</center><p>

</td></tr></table></center>
</body>
</head>
