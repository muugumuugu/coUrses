<html>
<head>
<link rel=StyleSheet href="../../pdbstyle.css" type="text/css" media=all>
<title>3D printing, rapid prototyping</title>
</head>
<body>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script language="JavaScript">
<!--
   if (self.location.href != top.location.href) {
      top.location.href = self.location.href;
   }
-->
</script>


<center><table width=800><tr><td>

<center>
<h1>Workflow for rapid prototyping of 3D reconstructed surfaces, applications to rock art</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
September 2013
</center>
<p><br>

<p align="justify">
The following describes one of many possible pipelines for rapid prototyping (RP) 3D reconstructed
surfaces. While some comments will be made regarding the reconstruction process, that is
covered in other places. 
The RP system will be based upon the on-line service offered by Shapeways, but the printable 
models created will be applicable to any RP facility capable of supporting colour.
Note that as with any documentation of this type it can become out of date as time goes on, new 
releases of the software etc. This is especially so since some of the work flows described here 
result from bugs or other inadequacies in the various software tools available.
The software used here and version numbers are as follows:<p>
</p>
<ul>
<li>PhotoScan, version 0.9.1<p>
<li>Blender, version 2.6.3<p>
<li>MeshLab, version 1.3.2 64 bit<p>
<li>Mac OSX, version 10.8.4<p>
</ul><p>

The overall summary of the process is as follows<p>
<ul>
<li><p align="justify">
Reconstruct the surface from the photographs.
</p>
<li><p align="justify">
Remove parts of the model not required and apply any other editing.
</p>
<li><p align="justify">
Scale the model to the desired size.
</p>
<li><p align="justify">
Thicken the surface.
</p>
<li><p align="justify">
Export in a format suitable for the RP process.
</p>
</ul>
<p>

<b>Reconstruction</b><p>
<p align="justify">
There are a number of software candidates for 3D reconstruction, while this is not intended to
be a comprehensive survey or evaluation of the options, two of the main players to date are
AutoDesks 123D Catch and PhotoScan. While 123D Catch is free, it is cloud based and thus problematic
when working in the field. PhotoScan is modestly priced and has good cross platform support,
unlike 123D Catch which is MSWindows only. For the purposes of this document PhotoScan
is used mainly because 123D Catch has
some major problems with its OBJ export which is often faulty, that is, it generates degenerate mesh
triangles and other problems that adversely affect the RP process.
</p>

<b>Model editing</b><p>
<p align="justify">
Most RP machine software place some expectations on the models being printed, Shapeways
is particularly sensitive, overly so in the authors opinion. 
For example, models must be "watertight", otherwise referred to as manifold.
There is often a minimum thickness realisable, and so on. As such, some care needs to be taken
when preparing models. There are three places, at least, where editing can be performed. They
are: 
</p>
<ul>
<li><p align="justify">
In the reconstruction software itself. Indeed PhotoScan has a reasonable
set of tools for choosing a subset of the selected mesh, removing extraneous triangles, and so on.
In the example here PhotoScan was employed, export as OBJ format for subsequent processing in
MeshLab and Blender as below.
</p>
<li><p align="justify">
MeshLab can be used to close holes, select regions, remove triangles, along with a whole
range of other operations.
</p>
<li><p align="justify">
There are many other 3D modelling packages that may be used to edit the mesh resulting
from the reconstruction, including Blender.
</p>
</ul>
<p align="justify">
Before and after screen shots are shown below.
</p>
<center>
   <a href="http://paulbourke.net/miscellaneous/rapidproto/photoscan1.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/photoscan1_s.png" width=800 height=604 border=1></a>
</center><p>
<center>
   <a href="http://paulbourke.net/miscellaneous/rapidproto/photoscan2.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/photoscan2_s.png" width=800 height=606 border=1></a>
</center><p>

<b>Scale</b><p>
<p align="justify">
As a general rule the result of a 3D reconstruction is of arbitrary scale.
At the time of writing when one uploads to Shapeways one may choose
units of millimeters, inches, or meters. mm are recommended, after all, who still uses "inches"!
Note: one cannot scale after uploading, a particularly frustrating aspect of Shapeways.
Scaling can obviously be done in almost any 3D package, MeshLab is
chosen here, the procedure is normally to scale to a unit bounding box, 
found in the "normals, curvatures and orientation" menu,
followed by scaling to the desired size. The author also generally first translates the centroid of the object
to the origin, found in the same menu: "Transform: move, translate, center".
</p>
<center>
	<a href="http://paulbourke.net/miscellaneous/rapidproto/scale.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/scale_s.png" width=800 height=586 border=1></a>
</center><p>

<b>Thicken</b><p>
<p align="justify">
Any rapid prototyping of the sort relevant here requires a solid object, to date
the process has been working on a single infinitely thin mesh. There are a number
of algorithms for doing this, a popular one being called the "rolling ball" algorithm,
one imagines a ball (sphere) rolling around on the surface and the most distant point of the
sphere from the surface defines an offset surface. The approach taken here is to
use the "solidify" modifier found in Blender. Import the OBJ file, select the mesh and choose the
"Add modifier" option.
</p>
<center>
   <a href="http://paulbourke.net/miscellaneous/rapidproto/solidify.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/solidify_s.png" width=800 height=602 border=1></a>
</center><p>
<p align="justify">
The thickness required for a particular RP machine varies. The most common colour
printer at the time of writing is the ZCORP, known as the "full colour sandstone"
on ShapeWays. The author finds that 5mm is a safe minimum, noting of course that one
gets charged per volume of model so the thinnest is usually desirable.
</p>

<b>Export for upload</b><p>
<p align="justify">
Not all formats traditionally used for RP support colour let alone a textured surface, for example STL
cannot define a colour surface.
Shapeways supports a number of file formats for colour models, namely
DAE, WRL, X3D, X3DB, X3DV. Some of these are antiquated (eg: WRL) and others
are proprietary (eg: DAE), the author has found X3D to be have the most
reliable support.
</p>
<center>
   <a href="http://paulbourke.net/miscellaneous/rapidproto/shapeways.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/shapeways_s.png" width=800 height=723 border=1></a>
</center><p>
<br>

<p align="justify">
<b>Note</b>: Shapeways (at the time of writing) does not seem to be able to handle
the (perfectly ok) zip files created by Mac OSX. That is, by selecting a folder or files
and right clicking and choosing "Compress". The solution is to use the command line
options of the UNIX based version of zip, namely:
</p>
<pre>zip outputfilename.zip -xi file1 file2 file3 ...
</pre>

<br><br>

<center>
<h1>Workflow for rapid prototyping of molecular data</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
February 2012, Updated October 2013
</center>
<p><br><p>

<p align="justify">
The following describes one of possibly many pipelines for taking PDB models and 
producing physical representations using Rapid Prototyping (RP). In what follows
various packages will be used to create representations, generally of PDB files.
The RP system will be based upon the online service offered by Shapeways 
(see <a href="index.html#appendix">appendix</a>), but the 
printable models created will be applicable to any RP facility based upon the two 
main machines in this area, namely the ZCORP and ObJet. Note that as with any documentation
of this type it can become out of date as time goes on, new releases of the software etc.
This is especially so since some of the work flows described here result from bugs 
or other inadequacies in the chemistry software or the Shapeways software.
</p>

The software used here and versions numbers are as follows:<p>
<ul>
<li>VMD, Mac version 1.9.1<p>
<li>MacPyMol, version 1.5.0.5<p>
<li>MeshLab, version 1.3.2 64 bit<p>
<li>Mac OSX, version 10.8.2<p>
</ul><p>

<p align="justify">
The requirements for any model destined for RP processing are
</p>
<ul>
<li>It must be "watertight", otherwise referred to as manifold.<p>
<li>It must be the correct dimensions.
Many of the file formats (STL, x3D, wrl ....) do not explicitly define units, as
such RP software has some license in what units to apply.<p>
<li>The mesh approximation of the shape is ideally not evident in the final 3D print.<p>
<li>In the case of colour prints, the intention here, there is a limited set of
file formats that support colour and are supported by RP suppliers.<p>
</ul>

<p align="justify">
The examples provided here will use the following structure:
<a href="http://paulbourke.net/miscellaneous/rapidproto/example.pdb">example.pdb</a>
</p>
<br>

<b>VMD - sphere models</b><p>
<ul>
<li>Render as VDW
<p>
<li><p align="justify">
Adjust the size of the spheres so it will be structurally sound and connected, nothing that smaller
spheres will result in less material and hence lower printing costs.
</p>
<li><p align="justify">Turn axes off since they will be exported as geometry however
they can also be deleted later in MeshLab.
</p>
</ul>

<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/vmdspheres.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/vmdspheres.png" width=800 height=445></a>
</center><p>

<ul>
<li><p align="justify">Render to OBJ file. This will produce two files, a .obj file and a .mtl file.
For example: <a href="http://paulbourke.net/miscellaneous/rapidproto/vmdspheres.zip">vmdspheres.zip</a>.
VMD seems to sometimes create an incorrect reference to the .mtl file, this will
result in no colour when importing into Meshlab (or other obj file readers). 
This can be fixed by editing the .obj
file and correcting the name of the .mtl file in the header.
</p>
<li>Import the .obj file into Meshlab.
The .obj models from VMD are very inefficient, each face of each sphere do not share vertices.
There is a bug in Meshlab whereby if the duplicate vertices are removed (normally a good thing)
then the resulting wrl file is corrupt.
<p>
<li>Scale to unit bounding box, found in the "normals, curvatures and orientation" menu.
Scale to known size, on import Shapeways will give the option to use units of mm.
</p>
<li>Unfortunately the sphere resolution option in MatLab is not reflected in the exported geometry.
If the spheres are considered too course refine the mesh using midpoint 
subdivision surfaces, see the "remeshing, simplification and reconstruction" menu.
</p>
<li>Apply a Laplacian smooth, this can be found in the "smoothing pairing and deformation" menu.
</p>
<li>Export as wrl and optionally zip the result for faster upload.
Example: <a href="http://paulbourke.net/miscellaneous/rapidproto/vmdsphereswrl.zip">vmdsphereswrl.zip</a>.
</p>
<li>Upload wrl file to Shapeways (see <a href="index.html#appendix">appendix</a>).
</p>
</ul>
<p>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/shapeways1.png"><img src="http://paulbourke.net/miscellaneous/rapidproto/shapeways1.png" width=726 height=957></a>
</center>
<p>
<br>
<br>

<b>PyMol sphere models</b><p>

<ul>
<li>Turn off all representations except spheres<p>
<li>In the prompt region type "set sphere_scale,0.7", or a size that retains connectivity
but minimised printed volume.<p>
<li>Save image as PovRay, file menu. PyMol does allow a model to be saved as wrl but
there is no straightforward way to scale for the RP process.
Note that in the prompt region it is also possible to save a PovRay model file by
typing "ray renderer=1".<p>
</ul><p>

<center>
	<img src="http://paulbourke.net/miscellaneous/rapidproto/pymolscreen.png" width=800 height=721 border=0>
</center><p>

<p align="justify">
The PovRay format was chosen since it is a relatively easy format to parse in
order to extract the spheres, their radius and colour, and then scale and save
as wrl for upload to Shapeways (see <a href="index.html#appendix">appendix</a>).
</p>

<pre>
Usage: <a href="http://paulbourke.net/miscellaneous/rapidproto/pymol2wrl.c">pymol2wrl</a> [options] povfilename
Options:
    -s n    scale factor
</pre>

<p align="justify">
An example of the povray file is:
<a href="http://paulbourke.net/miscellaneous/rapidproto/example.pov">example.pov</a> and an example of the output wrl file is
<a href="http://paulbourke.net/miscellaneous/rapidproto/examplewrl.txt">example.wrl</a>. Note that spheres can be represented in wrl files
in multiple ways. One, and is used here is to use the sphere primitive. The risk
with that is that you are relying on the RP software to tessellate the sphere suitably.
The alternative is to tessellate the sphere oneself at a higher resolution,
see reference to WRLSphere3() in the code above.
</p>

<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/pymolshapeways.png" width=733 height=1054 border=0>
</center><p>

<p align="justify">
At the time of writing Shapeways allows one to upload wrl files and select
units of millimeters, inches, or meters.
</p>

<p align="justify">
Examples of final printed models.
</p>

<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/models.jpg">
<img src="http://paulbourke.net/miscellaneous/rapidproto/models_s.jpg" width=800 height=600 border=1>
</a>
</center><p>
<br>
<br>
<br>
<br>

<b>PyMol surface models</b><p>

<p align="justify">
Rapid prototyping of PyMol surface models is relatively straight forward, the
following outlines the steps used to create models accepted by Shapeways 
(see <a href="index.html#appendix">appendix</a>). Software
used is just PyMol and MeshLab.
</p>

In PyMol<p>
<ul>
<li><p align="justify">
Turn off all representations other than the surface.
</p>
<li><p align="justify">
Set the surface resolution, the default is rather low. This is achieved with
the following command "set surface_quality, 1". Higher numbers can be used but
note ShapeWays has (at the time of writing) a 64MB file size limit or 1 million
faces, which ever comes first.
</p>
<li><p align="justify">
Save the file to a wrl file, as "save something.wrl".
</p>
</ul>
<center><img src="http://paulbourke.net/miscellaneous/rapidproto/add1.png" width=800 height=663 border=1></center><p>

In MeshLab<p>
<ul>
<li><p align="justify">Open the wrl file as saved from PyMol.
</p>
<li><p align="justify">
Check the faces count.
</p>
<li><p align="justify">
In the Normals, Curvature, and Orientations menus scale the model to the desired
size. Since there is no known size, first scale to a unit cube, then scale to
the desired size. Note that ShapeWays expects mm for the dimensionless file
format to be used here.
</p>
<li><p align="justify">Export to as x3d, choose vertex normals rather than face normals.
</p>
</ul>
<center><img src="http://paulbourke.net/miscellaneous/rapidproto/add2.png" width=800 height=841 border=1></center><p>
<p><br>

<a name="appendix"><b>Appendix: Shapeways</b></a><p>
<p align="justify">
Unfortunately the model testing at Shapeways is overly conservative. Models that are perfectly
acceptable for printing on the ZCorp printer are regularly rejected. While people creating
models manually in a 3D package can normally correct such problems, there is not always the
opportunity to fix models created from scientific data. At the time of writing the author is
preferring to use local RP companies instead of Shapeways.
</p>

<center><img src="http://paulbourke.net/miscellaneous/rapidproto/real1.jpg" width=800 height=800 border=1></center><p>

<center><img src="http://paulbourke.net/miscellaneous/rapidproto/molecule.jpg" width=800 height=590 border=1></center><p>

<br><br>

<center>
<h1>Experiments in Rapid Prototyping</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
January 2005<p>
</center>
<p><br><p>

<p align="justify">
The testing here of the ZCorp colour rapid prototyping machine were
geared towards determining how far one can push the technology and how useful
it might be for mathematical and scientific visualisation.
While these particular machines are one of the most advanced and general,
they still place some significant constraints on the models they can
represent. Perhaps the most serious involves the infusion process after
the model has been built, the model can be extra delicate during this 
infusion process. This places an extra constraint on the thinnest structure
over and above what the machine process can create.
</p>

<p align="justify">
The machine in question has a volume
of about 200 x 200 x 250 mm. The first tests below were intended to
investigate the value of creating solid models of mathematical shapes, in
this case <a href="../../geometry/supershape/index.html">supershapes</a>.
</p>

<center><table><tr><td>
Supershapes<br>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/mathematics.jpg"><img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/mathematics_s.jpg" width=400 height=300></a>
</center>
</td><td width=20>
&nbsp;
</td><td>
Fractal, Sierpinski sponge<br>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/sponge.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/sponge_s.jpg" border=1 width=412 height=300></a>
</center>
</td></tr></table></center><p>

<b>Character from an animated movie</b> (by Russell Scott)<p>
<p align="justify">
The following model is somewhat more demanding, firstly the wings are very thin,
and secondly the model is not free standing so until it is infused with hardener
it can't easily support itself. Indeed most damage to the model occurred not by
the "printing" process but by the infusion process which removed the structural
strength from a number of parts of the model, this seems to occur when the
infusing fluid saturates right through the model.
</p>
<center>
<table><tr><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/character_render.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/character_render_s.jpg" width=400 height=300></a>
</td><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/character0.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/character0_s.jpg" width=262 height=300>
</td></tr><tr><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/character2.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/character2_s.jpg" width=314 height=300>
</td><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/character1.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/character1_s.jpg" width=295 height=300>
</td></tr></table>
</center><p>

<b>Colour</b><p>

<p align="justify">
The <a href="../../dataformats/stl/index.html">STL format</a> 
used to represent the monochrome models here has no support for colour. 
The software that drives the machine expects VRML descriptions for
colour models. VRML models are not difficult to create in code given
parametric equations for the surfaces.
The quality of the colour, see elliptic torus, was surprisingly good. This
model was created intentionally with a continuous colour ramp to test this.
</p>

<p align="justify">
With regard to mathematical visualisation, it is immediately obvious
once it is placed on a table
that the tetrahedral ellipse is perfectly flat on all sides, something
that is not at all obvious from computer based exploration.
</p>

<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/surfaces.jpg">
<img src="http://paulbourke.net/miscellaneous/rapidproto/surfaces_s.jpg" width=424 height=300></a><br>
<a href="../../geometry/spherical/index.html">Elliptic Torus</a> and
<a href="../../geometry/spherical/index.html">Tetrahedral Ellipse</a>
</center><p>

<center><table><tr><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/astrotom.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/astrotom_s.jpg" width=300 height=400></a>
</td><td align="center">
Astronomer by Russell Scott
</td></tr><tr><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/astrotom1.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/astrotom1_s.jpg" width=262 height=300>
</td><td align="center">
<a href="http://paulbourke.net/miscellaneous/rapidproto/astrotom2.jpg">
<img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/astrotom2_s.jpg" width=314 height=300>
</td></tr></table>
</center><p> 

<p><br><br><br><p>



<table width=100% cellpadding=0 cellspacing=0>
<tr><td valign="top">

<center>
<h1>Building physical models<br>using the ZCorp Z402 3D Printer</h1>
Written by <a href="../index.html">Paul Bourke</a><p>
See also <a href="../../geometry/borromean/index.html">Borromean rings</a><br>
and specification of the <a href="../../dataformats/stl/index.html">STL</a> format.
October 2000<br>
</center>
<p><br>

<p align="justify">
In 2000 ZCorp introduced a new range of rapid prototyping machines. This was a
good opportunity to create a physical object from one (or more) of my
favourite 3D models. The model I chose first was the Borromean rings.
Many 3D printers for rapid prototyping are based upon liquid polymers
and lasers that trace out the contours. These present serious restrictions
on the types of models because it is difficult to create models that
require self supporting structures during their creation.
The ZCorp type of device (and others) use a powder which supports
structures as necessary as the model is being built. In addition, a
feature not used here, their device can create colour models.
</p>
<p align="justify">
The model chosen is defined by 3 interlocking curves in 3D space.
The industry standard format for describing models for stereo-lithography
is called the STL format and it only describes solid objects not curves,
lines and points.
There a number of ways of forming solid pipes, a rather inefficient method
was chosen here but one that is easy to create, can be extended to all
curve based forms, and reliably represents the curve.
The method is simply to "stack" spheres (described as STL format) along
the curve. The thickness of the curve can be controlled by using
different radii. Depending on
how close the spheres are placed the thick curve can be given a smooth,
ribbed, or beaded look. A subsequent implementation that is much more efficient
and doesn't have the ribbed surface effect is to use cylindrical elements
for straight sections of the curve.
</p>
<p align="justify">
The top curve on the right is the one actually used to create the model.
The second and third images show a smooth and rougher version.
</p>
<b>Source code</b><br>
<p align="justify">
The source code that creates the model used in this discussion is given
<a href="http://paulbourke.net/miscellaneous/rapidproto/borromean2stl.c">here</a>. It can be readily modified to create
any mathematical curve. The most useful part will be the function that
creates a sphere in STL and geom format. The geom format is the format
used locally to view stereographic images, in this case it was used to
test the appearance of the model before sending it off to be created.
</p>

<p align="justify">
And finally here's the finished product. The three links are loose and can
be moved around as one would expect. The bone-like fell of the material
is not unattractive.
</p>

<b>STL format</b><p>
<p align="justify">
Representing triangular facets in the STL format is simple, for example
below is the first polygon from the model created here. All the polygons
are normally encapsulated between "solid" / "endsolid" tags.
</p>
<pre>
facet normal -0.194944 0.980048 -0.0387767
outer loop
   vertex 1 0.37735 -0.333333
   vertex 1.07071 0.392574 -0.304044
   vertex 1.07654 0.392574 -0.333333
endloop
endfacet
</pre>
The whole model as a compressed STL file:
<a href="http://paulbourke.net/miscellaneous/rapidproto/borromean_stl.gz">borromean_stl.gz</a>.
<p>

<b>Example 2 - Knot</b>
<p>
The mathematics behind this object is given 
<a href="../../geometry/knots/index.html">here as knot 3</a>.
<p>
The model as a compressed STL file:
<a href="http://paulbourke.net/miscellaneous/rapidproto/knot3stl.gz">knot3stl.gz</a>.
<p>
The source code that creates the model is <a href="http://paulbourke.net/miscellaneous/rapidproto/knot3stl.c">knot3stl.c</a>.

</td><td width=20>
&nbsp;
</td><td valign="top">

<!-- <a href="bm1.html"><img src="bm1s.gif" width=200 height=200></a><p> -->
<a href="http://paulbourke.net/miscellaneous/rapidproto/bm2.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/bm2s.gif" width=200 height=200></a><p>
<!-- <a href="bm3.html"><img src="bm3s.gif" width=200 height=200></a><p> -->

<a href="http://paulbourke.net/miscellaneous/rapidproto/bm4.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/bm4s.gif" width=200 height=301></a><p>
<a href="http://paulbourke.net/miscellaneous/rapidproto/bm5.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/bm5s.gif" width=200 height=152></a><p>

<a href="http://paulbourke.net/miscellaneous/rapidproto/knot3.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/knot3s.gif" width=200 height=200></a><p>
<a href="http://paulbourke.net/miscellaneous/rapidproto/knot1.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/knot1s.gif" width=200 height=200></a><p>
<a href="http://paulbourke.net/miscellaneous/rapidproto/knot4.html"><img src="http://paulbourke.net/miscellaneous/rapidproto/knot4s.gif" width=200 height=146></a><p>
<!-- <a href="knot2.html"><img src="knot2s.gif" width=200 height=143></a><p> -->
</td></tr>
</table>


<br><br><br><Br>


<a name="other">
<h3>Other examples (2007)</h3>
</a>

<b>ASKAP telescope model</b><p>
<center>
<table><tr><td>
	<a href="http://paulbourke.net/miscellaneous/rapidproto/dish3.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/dish3s.jpg" width=400 height=533 border=1></a>
</td><td width=20>
	&nbsp;
</td><td>
	<a href="http://paulbourke.net/miscellaneous/rapidproto/dish2.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/dish2s.jpg" width=400 height=533 border=1></a>
</td></tr></table>
</center><p>

<b>Rocks and fossils</b><p>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/fossil2.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/fossils.jpg" width=800 height=600 border=1></a>
</center>
<p>


<br><br><br><Br>



<h3>Sirovision cliff face models</h3>

<p align="justify">
In the following a terrain (cliff) was recreated, the original surface and texture
map is automatically generated by taking two photographs of the cliff face. Software
called "Sirvision" can then recreate a 3D mesh surface from the two images, one of
the images can additionally be applied as a texture map.
</p>

<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/top.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/top_s.jpg" border=1 width=800 height=575></a>
</center><p>

<p align="justify">
In general successful rapid prototyping require solid objects, not just (infinitely
thin) surfaces. This is certainly true for the ZCORP machines, while the model can
be structurally strong after curing, it can be quite delicate beforehand.
The surface mesh here is simply extruded a fixed distance, this works because the
surfaces here don't have "caves".
</p>

<center><table><tr><td>
Top surface<br>
<a href="http://paulbourke.net/miscellaneous/rapidproto/topangle.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/topangle_s.jpg" border=1 width=800 height=391></a>
</td></tr></table></center><p>

<center><table><tr><td>
Underneath<br>
<a href="http://paulbourke.net/miscellaneous/rapidproto/bottom.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/bottom_s.jpg" border=1 width=800 height=282></a>
</td></tr></table></center><p>

<p align="justify">
The following are two images of the modelled surface.
</p>

<center><table><tr><td>
<a href="http://paulbourke.net/miscellaneous/rapidproto/rockface1.jpg"><img border=1 src="http://paulbourke.net/miscellaneous/rapidproto/rockface1_s.jpg" width=400 height=300></a>
</td><td width=20>
&nbsp;
</td><td>
<a href="http://paulbourke.net/miscellaneous/rapidproto/rockface2.jpg"><img src="http://paulbourke.net/miscellaneous/rapidproto/rockface2_s.jpg" border=1 width=412 height=300></a>
</td></tr></table></center><p>

<b>400 million year old Placoderm embryo</b><p>
<center><img src="http://paulbourke.net/miscellaneous/rapidproto/placoderm.jpg" width=800 height=600 border=1></center><p>

<b>Calabi-Yau model</b><p>
<center><img src="http://paulbourke.net/miscellaneous/rapidproto/calabi_yau.jpg" width=800 height=600 border=1></center><p>

<b>Examples from 2012-2014</b><p>

Photogrammetrically derived bust of Socrates, UWA.<br>
<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/headbust.jpg" width=800 height=570 border=1>
</center><p>

Peptide<br>
<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/molecule1.jpg" width=800 height=590 border=1>
</center><p>

Mine Pit<br>
<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/mine.jpg" width=800 height=589 border=1>
</center><p>

Earths Oceans<br>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/oceans.jpg">
<img src="http://paulbourke.net/miscellaneous/rapidproto/oceans_s.jpg" width=800 height=410 border=1></a>
</center><p>

Knots<br>
<center>
<a href="http://paulbourke.net/miscellaneous/rapidproto/knotsprint.jpg">
<img src="http://paulbourke.net/miscellaneous/rapidproto/knotsprint_s.jpg" width=800 height=533 border=1></a>
</center><p>

Chain mail<br>
<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/chainmail.jpg" width=800 height=460 border=1></a>
</center><p>
<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/chainmail3d.jpg" width=800 height=680 border=1></a>
</center><p>

<br><br>

<center>
<h1>PhotoScan to Shapeways</h1>
Written by <a href="../index.html">Paul Bourke</a><br>
June 2015
</center>
<p><br><p>

<p align="justify">
The following are some brief notes around the conversion of PhotoScan reconstructed models to Shapeways
for 3D printing. Some additional notes can be found <a href="index.html">here</a>
around editing in MeshLab and thickening in Blender. This document is mostly aimed at
the file formats available from PhotoScan and the requirements for Shapeways.
As is often the case the difficulty here arises from poor software support, in this case
it arises from deficiencies on the Shapeways site, they are: incomplete support for textured
meshes through OBJ and 3ds files, the incomplete support for zip archives (in this case those created
on the Mac by MacOSX).
</p>

<b>Build model in PhotoScan</b><p>
<p align="justify">
It is assumed here that the model is a closed surface, that is, has no holes. PhotoScan
has a number of tools to facilitate this, see the hole closing and the extrapolation
option in the mesh building stage.
</p>

<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/figure1.png" width=800 height=1112 border=0><br>
<font size=-1>Example used in this tutorial</font>
</center><p>

<b>Export</b><p>

<p align="justify">
At the time of writing the following formats are recommended on the Shapeways site.
</p>

<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/figure2.png" width=307 height=164 border=0>
</center><p>

<p align="justify">
The following export formats are available from PhotoScan.
</p>

<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/figure3.png" width=250 height=207 border=0>
</center><p>

<p align="justify">
A commentary/comparison of the formats in common is
</p>
<ul>
<li><p align="justify">
wrl, in the authors opinion, is not an encouraged format. wrl was never intended
as an interchange format and is often fraught with problems as a consequence.
</p>
<li><p align="justify">
stl does not support textured colour but would generally be the choice for monochrome
models, highly reliable due to its extreme simplicity (albeit inefficiency due to not
sharing vertices). It was designed explicitly for rapid prototyping.
</p>
<li><p align="justify">
obj saved models consist of at least three files, sometimes more. These will be a .obj file
which contains the 
mesh geometry, a .mtl file which is a description of the textures, and one or more texture files.
Unfortunately, while Shapeways used to support textured .obj files which are semi standard for reconstruction
work, they recently removed that capability, disappointing.
</p>
<li><p align="justify">
3ds will consist of at least 2 files, the geometry file with a .3ds extension, and one or more texture
files.
PhotoScan can export textures as JPG or png images as required by Shapeways, see the "Export
model" dialog options.
</p>
<li><p align="justify">
dae will consist of at least 2 files, the geometry file with a .dae extension, and one or more texture
files.
</p>
</ul><p>

<b>Zip</b><p>
<p align="justify">
The preferred formats then are: obj, 3ds and dae.
Unfortunately Shapeways has discontinued obj support.
At the time of writing Shapeways rejects the 3ds file from PhotoScan, despite every other package
tried working fine.
</p>
<p align="justify">
So, only dae left.
The last part of the story is how to combine all the assets (geometry file and texture) into one
package for Shapeways. Instead of offering multiple file uploads of the assets, pretty simple these days,
they insist on a single zip file.
Unfortunately it seems Shapeways is a little fussy
over what can be in the zip file. Specifically, the zip file that MacOSX creates by selecting files and
right clicking isn't accepted, despite every other unzip (and other 3D printing companies) accepting it.
</p>

<p align="justify">
If one is familiar with the command line then this creates a zip file that Shapeways can handle.
</p>
<pre>
   zip slab3.zip slab3.jpg slab3.dae
</pre>

<p align="justify">
There are no doubt zip utilities that create zip files acceptable to Shapeways, however iZip 
does not work, the uploaded zip files seem to crash the Shapeways upload system.
Keka does seem to work.
YemuZip does seem to work.
Others can be tried by the reader ... note that the issue seems to be around other files
some zip applications include in the archive, so disabling that in the applications preferences (if possible)
is encouraged.
</p>

<center>
<img src="http://paulbourke.net/miscellaneous/rapidproto/figure4.png" width=800 height=463 border=0><br>
</center><p>

<b>Notes</b><p>
<ul>
<li><p align="justify">
Now that Shapeways offers a scaling feature, going straight from PhotoScan to Shapeways should
now be a viable route. Since PhotoScan models can be arbitrary dimensions, in the past it was
necessary to scale prior to Shapeways upload.
</p>
<li><p align="justify">
It would be "nice" if Shapeways supported a format that encapsulates all the assets
without the need to zip the collection, the obvious choice would be u3d.
</p>
</ul>

<td></tr></table></center>
</body>
</html>

